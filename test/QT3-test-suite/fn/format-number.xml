<?xml version="1.0" encoding="iso-8859-1"?>
<test-set xmlns="http://www.w3.org/2010/09/qt-fots-catalog" name="fn-format-number"  covers-30="fn-format-number">
   <description>Tests for the format-number() function transferred from XSLT 1.0/2.0 to XPath 3.0/XQuery 3.0</description>
   <link type="spec" document="http://www.w3.org/TR/xpath-functions-11/"
         idref="func-format-number"/>
   <dependency type="spec" value="XP30+ XQ30+"/>
   <test-case name="numberformat01">
      <description>
        Creator: David Marston 
        Purpose: Test of format-number with 2 arguments, showing zeroes. </description>
      <created by="Michael Kay, Saxonica" on="2010-12-13"/>
      <!--SOURCE: numberformat/numberformat01.xml-->
      <test>format-number(2392.14*36.58,'000,000.000000')</test>
      <result>
         <assert-string-value>087,504.481200</assert-string-value>
      </result>
   </test-case>
   <test-case name="numberformat02">
      <description>
        Creator: David Marston 
        Purpose: Test of format-number and # and 0 in format string. </description>
      <created by="Michael Kay, Saxonica" on="2010-12-13"/>
      <!--SOURCE: numberformat/numberformat02.xml-->
      <test>format-number(12792.14*96.58,'##,###,000.000###')</test>
      <result>
         <assert-string-value>1,235,464.8812</assert-string-value>
      </result>
   </test-case>
   <test-case name="numberformat03">
      <description>
        Creator: David Marston 
        Purpose: Test of format-number on a negative number. </description>
      <created by="Michael Kay, Saxonica" on="2010-12-13"/>
      <!--SOURCE: numberformat/numberformat03.xml-->
      <test>format-number(2792.14*(-36.58),'000,000.000###')</test>
      <result>
         <assert-string-value>-102,136.4812</assert-string-value>
      </result>
   </test-case>
   <test-case name="numberformat04">
      <description>
        Creator: David Marston 
        Purpose: Test of format-number on a negative number; should choose second pattern. </description>
      <created by="Michael Kay, Saxonica" on="2010-12-13"/>
      <!--SOURCE: numberformat/numberformat04.xml-->
      <test>format-number(2392.14*(-36.58),'000,000.000###;###,###.000###')</test>
     <result>
         <assert-string-value>87,504.4812</assert-string-value>
      </result>
   </test-case>
   <test-case name="numberformat05">
      <description>
        Creator: David Marston 
        Purpose: Test of format-number percentage format. </description>
      <created by="Michael Kay, Saxonica" on="2010-12-13"/>
      <!--SOURCE: numberformat/numberformat05.xml-->
      <test>format-number(0.4857,'###.###%')</test>
      <result>
         <assert-string-value>48.57%</assert-string-value>
      </result>
   </test-case>
   <test-case name="numberformat06">
      <description>
        Creator: David Marston 
        Purpose: Test of format-number per-mille format. </description>
      <created by="Michael Kay, Saxonica" on="2010-12-13"/>
      <!--SOURCE: numberformat/numberformat06.xml-->
      <test>format-number(0.4857,'###.###&#8240;')</test>
      <result>
         <assert-string-value>485.7&#8240;</assert-string-value>
      </result>
   </test-case>
   <test-case name="numberformat07">
      <description>
        Creator: David Marston 
        Purpose: Test of format-number currency symbol, which is not supposed to be there. </description>
      <created by="Michael Kay, Saxonica" on="2010-12-13"/>
      <!--SOURCE: numberformat/numberformat07.xml-->
      <test>format-number(95.4857,'&#164;###.####')</test>
      <result>
         <assert-string-value>&#164;95.4857</assert-string-value>
      </result>
   </test-case>
   <test-case name="numberformat08">
      <description>
        Creator: David Marston 
        Purpose: Test of format-number with prefix and suffix in format string. </description>
      <created by="Michael Kay, Saxonica" on="2010-12-13"/>
      <!--SOURCE: numberformat/numberformat08.xml-->
      <test>format-number(2.14*86.58,'PREFIX##00.000###SUFFIX')</test>
      <result>
         <assert-string-value>PREFIX185.2812SUFFIX</assert-string-value>
      </result>
   </test-case>
   <test-case name="numberformat09">
      <description>
        Creator: David Marston 
        Purpose: Test default decimal-format on separator characters, changing both. </description>
      <created by="Michael Kay, Saxonica" on="2010-12-13"/>
      <!--SOURCE: numberformat/numberformat09.xml-->
      <environment>
         <decimal-format decimal-separator="|" grouping-separator="."/>
      </environment>
      <test>format-number(931.4857,'000.000|###')</test>
      <result>
         <assert-string-value>000.931|486</assert-string-value>
      </result>
   </test-case>
   <test-case name="numberformat11">
      <description>
        Creator: David Marston 
        Purpose: Test default decimal-format on pattern-only characters, positive number. </description>
      <created by="Michael Kay, Saxonica" on="2010-12-13"/>
      <!--SOURCE: numberformat/numberformat11.xml-->
      <environment>
         <decimal-format digit="!" pattern-separator="\"/>
      </environment>
      <test>format-number(26931.4,'+!!!,!!!.!!!\-!!,!!!.!!!')</test>
      <result>
         <assert-string-value>+26,931.4</assert-string-value>
      </result>
   </test-case>
   <test-case name="numberformat12">
      <description>
        Creator: David Marston 
        Purpose: Test default decimal-format on pattern-only characters, negative number. </description>
      <created by="Michael Kay, Saxonica" on="2010-12-13"/>
      <!--SOURCE: numberformat/numberformat12.xml-->
      <environment>
         <decimal-format digit="!" pattern-separator="\"/>
      </environment>
      <test>format-number(-26931.4,'+!!,!!!.!!!\-!!!,!!!.!!!')</test>
      <result>
         <assert-string-value>-26,931.4</assert-string-value>
      </result>
   </test-case>
   <test-case name="numberformat13">
      <description>
        Creator: David Marston 
        Purpose: Test default decimal-format on pattern-only characters, negative number and one pattern. </description>
      <created by="Michael Kay, Saxonica" on="2010-12-13"/>
      <!--SOURCE: numberformat/numberformat13.xml-->
      <environment>
         <decimal-format digit="!" pattern-separator="\"/>
      </environment>
      <test>format-number(-26931.4,'!!!,!!!.!!!')</test>
      <result>
         <assert-string-value>-26,931.4</assert-string-value>
      </result>
   </test-case>
   <test-case name="numberformat14">
      <description>
        Creator: David Marston 
        Purpose: Test specified result pattern for infinity. </description>
      <created by="Michael Kay, Saxonica" on="2010-12-13"/>
      <!--SOURCE: numberformat/numberformat14.xml-->
      <environment>
         <decimal-format infinity="off-the-scale"/>
      </environment>
      <test>format-number(1 div 0e0,'###############################')</test>
      <result>
         <assert-string-value>off-the-scale</assert-string-value>
      </result>
   </test-case>
   <test-case name="numberformat15">
      <description>
        Creator: David Marston 
        Purpose: Test specified result pattern for not-a-number. </description>
      <created by="Michael Kay, Saxonica" on="2010-12-13"/>
      <!--SOURCE: numberformat/numberformat15.xml-->
      <environment>
         <decimal-format NaN="non-numeric"/>
      </environment>
      <dependency type="feature" value="xpath-1.0-compatibility"/>
      <dependency type="spec" value="XP30+"/>
      <test>format-number('foo','#############')</test>
      <result>
         <assert-string-value>non-numeric</assert-string-value>
      </result>
   </test-case>
   <test-case name="numberformat16">
      <description>
        Creator: David Marston 
        Purpose: Test of decimal-format per-mille format with character being changed. </description>
      <created by="Michael Kay, Saxonica" on="2010-12-13"/>
      <!--SOURCE: numberformat/numberformat16.xml-->
      <environment>
         <decimal-format per-mille="m"/>
      </environment>
      <test>format-number(0.4857,'###.###m')</test>
      <result>
         <assert-string-value>485.7m</assert-string-value>
      </result>
   </test-case>
   <test-case name="numberformat17">
      <description>
        Creator: David Marston 
        Purpose: Test decimal-format output character for negative, 2 patterns. </description>
      <created by="Michael Kay, Saxonica" on="2010-12-13"/>
      <!--SOURCE: numberformat/numberformat17.xml-->
      <environment>
         <decimal-format minus-sign="_"/>
      </environment>
      <test>format-number(-26931.4,'+###,###.###;-###,###.###')</test>
      <result>
         <assert-string-value>-26,931.4</assert-string-value>
      </result>
   </test-case>
   <test-case name="numberformat18">
      <description>
        Creator: David Marston 
        Purpose: Test decimal-format output character for negative, one pattern. </description>
      <created by="Michael Kay, Saxonica" on="2010-12-13"/>
      <!--SOURCE: numberformat/numberformat18.xml-->
      <environment>
         <decimal-format minus-sign="_"/>
      </environment>
      <test>format-number(-26931.4,'###,###.###')</test>
      <result>
         <assert-string-value>_26,931.4</assert-string-value>
      </result>
   </test-case>
   <test-case name="numberformat19">
      <description>
        Creator: David Marston 
        Purpose: Test decimal-format declaration with a name. </description>
      <created by="Michael Kay, Saxonica" on="2010-12-13"/>
      <!--SOURCE: numberformat/numberformat19.xml-->
      <environment>
         <decimal-format name="myminus" minus-sign="_"/>
      </environment>
      <test>concat(format-number(-26931.4,'###,###.###','myminus'), '/',
            format-number(-42857.1,'###,###.###'))</test>
      <result>
         <assert-string-value>_26,931.4/-42,857.1</assert-string-value>
      </result>
   </test-case>
   <test-case name="numberformat20">
      <description>
        Creator: David Marston 
        Purpose: Test of decimal-format with qualified name. Unqualified name provided as a trap. </description>
      <created by="Michael Kay, Saxonica" on="2010-12-13"/>
      <!--SOURCE: numberformat/numberformat20.xml-->
      <environment>
         <namespace prefix="foo" uri="http://foo.ns"/>
         <decimal-format xmlns:foo="http://foo.ns" name="foo:decimal1" decimal-separator="!" grouping-separator="*"/>
         <decimal-format name="decimal1" decimal-separator="*" grouping-separator="!"/>
      </environment>
      <test>format-number(1234.567,'#*###*###!###','foo:decimal1')</test>
     <result>
         <assert-string-value>1*234!567</assert-string-value>
      </result>
   </test-case>
   <!-- numberformat21 - XSLT specific -->
   <!-- numberformat22 - XSLT specific -->
   <!-- numberformat23 - XSLT specific -->
   <!-- numberformat24 - XSLT specific -->
   
   <test-case name="numberformat26">
      <description>
        Creator: David Marston 
        Purpose: Designate a space as the grouping separator. </description>
      <created by="Michael Kay, Saxonica" on="2010-12-13"/>
      <!--SOURCE: numberformat/numberformat26.xml-->
      <environment>
         <decimal-format decimal-separator="," grouping-separator=" "/>
      </environment>
      <test>format-number(7654321.4857,'### ### ###,#####')</test>
      <result>
         <assert-string-value>7 654 321,4857</assert-string-value>
      </result>
   </test-case>
   <test-case name="numberformat27">
      <description>
        Creator: David Marston 
        Purpose: Test of format-number minus-sign behavior on positive numbers. </description>
      <created by="Michael Kay, Saxonica" on="2010-12-13"/>
      <!--SOURCE: numberformat/numberformat27.xml-->
      <environment>
         <decimal-format name="myminus" minus-sign="_"/>
      </environment>
      <test>string-join((format-number(2392.14*36.58,'000,000.000000','myminus'),
                        format-number(2392.14*36.58,'000,000.000000;###,###.000###'),
                        format-number(2392.14*36.58,'000,000.000000;###,###.000###','myminus')), ' ')
      </test>
      <result>
         <assert-string-value>087,504.481200 087,504.481200 087,504.481200</assert-string-value>
      </result>
   </test-case>
   <test-case name="numberformat28">
      <description>
        Creator: David Marston 
        Purpose: Test what happens to minus sign embedded in second pattern. </description>
      <created by="Michael Kay, Saxonica" on="2010-12-13"/>
      <!--SOURCE: numberformat/numberformat28.xml-->
      <environment/>
      <test>format-number(2392.14*(-36.58),'000,000.000###;-###,###.000###')</test>
      <result>
         <assert-string-value>-87,504.4812</assert-string-value>
      </result>
   </test-case>
   <test-case name="numberformat29">
      <description>
        Creator: David Marston 
        Purpose: Test decimal-format output character does not influence input. </description>
      <created by="Michael Kay, Saxonica" on="2010-12-13"/>
      <!--SOURCE: numberformat/numberformat29.xml-->
      <environment>
         <decimal-format minus-sign="_"/>
      </environment>
      <test>format-number(-26931.4,'+###,###.###;_###,###.###')</test>
      <result>
         <assert-string-value>_26,931.4</assert-string-value>
      </result>
   </test-case>
   <test-case name="numberformat30">
      <description>
        Creator: David Marston 
        Purpose: Test effects of minus-sign in one pattern. </description>
      <created by="Michael Kay, Saxonica" on="2010-12-13"/>
      <!--SOURCE: numberformat/numberformat30.xml-->
      <environment>
         <decimal-format name="myminus" minus-sign="_"/>
      </environment>
      <test>string-join((
                format-number(-26931.4,'-###,###.###'),
                format-number(-26931.4,'zzz-###,###.###','myminus'),
                format-number(-26931.4,'_###,###.###','myminus')), ' ')</test>
      <result>
         <assert-string-value>--26,931.4 _zzz-26,931.4 __26,931.4</assert-string-value>
      </result>
   </test-case>
   <test-case name="numberformat31">
      <description>
        Creator: David Marston 
        Purpose: Test output of altered minus, 2 patterns but no sign marker in pattern. </description>
      <created by="Michael Kay, Saxonica" on="2010-12-13"/>
      <!--SOURCE: numberformat/numberformat31.xml-->
      <environment>
         <decimal-format minus-sign="_"/>
      </environment>
      <test>format-number(-26931.4,'###,###.###;###,###.###')</test>
      <result>
         <assert-string-value>26,931.4</assert-string-value>
      </result>
   </test-case>
   <test-case name="numberformat32">
      <description>
        Creator: David Marston 
        Purpose: Test of format-number percent format with character being changed. </description>
      <created by="Michael Kay, Saxonica" on="2010-12-13"/>
      <!--SOURCE: numberformat/numberformat32.xml-->
      <environment>
         <decimal-format percent="c"/>
      </environment>
      <test>format-number(0.4857,'###.###c')</test>
      <result>
         <assert-string-value>48.57c</assert-string-value>
      </result>
   </test-case>
   <test-case name="numberformat34">
      <description>
        Creator: David Marston (modified by MHK because there are now rules on choosing a zero-digit) 
        Purpose: Test changing both digit and zero-digit in format string. </description>
      <created by="Michael Kay, Saxonica" on="2010-12-13"/>
      <!--SOURCE: numberformat/numberformat34.xml-->
      <environment>
         <decimal-format digit="!" zero-digit="&#1632;"/>
      </environment>
      <test>format-number(4030201.0506,'#!!!,!!!,&#1632;&#1632;&#1632;.&#1632;&#1632;&#1632;&#1632;&#1632;&#1632;0')</test>
      <result>
         <assert-string-value>#&#1636;,&#1632;&#1635;&#1632;,&#1634;&#1632;&#1633;.&#1632;&#1637;&#1632;&#1638;&#1632;&#1632;0</assert-string-value>
      </result>
   </test-case>
   <test-case name="numberformat35">
      <description>
        Creator: David Marston 
        Purpose: Test of unequal spacing of grouping-separator. </description>
      <created by="Michael Kay, Saxonica" on="2010-12-13"/>
      <!--SOURCE: numberformat/numberformat35.xml-->
      <environment/>
      <test>format-number(987654321,'###,##0,00.00')</test>
      <result>
         <assert-string-value>9876,543,21.00</assert-string-value>
      </result>
   </test-case>
   <test-case name="numberformat36">
      <description>
        Creator: David Marston 
        Purpose: Test what happens when we overflow available digits on the left. </description>
      <created by="Michael Kay, Saxonica" on="2010-12-13"/>
      <!--SOURCE: numberformat/numberformat36.xml-->
      <environment/>
      <test>format-number(239236.588,'00000.00')</test>
      <result>
         <assert-string-value>239236.59</assert-string-value>
      </result>
   </test-case>
   <test-case name="numberformat37">
      <description>
        Creator: David Marston 
        Purpose: Test result pattern for infinity, unchanged. </description>
      <created by="Michael Kay, Saxonica" on="2010-12-13"/>
      <!--SOURCE: numberformat/numberformat37.xml-->
      <environment/>
      <test>format-number(1 div 0e0,'###############################')</test>
      <result>
         <assert-string-value>Infinity</assert-string-value>
      </result>
   </test-case>
   <test-case name="numberformat38">
      <description>
        Creator: David Marston 
        Purpose: Test result pattern for not-a-number, unchanged. </description>
      <created by="Michael Kay, Saxonica" on="2010-12-13"/>
      <!--SOURCE: numberformat/numberformat38.xml-->
      <environment/>
      <dependency type="feature" value="xpath-1.0-compatibility"/>
      <dependency type="spec" value="XP30+"/>
      <test>format-number('foo','#############')</test>
      <result>
         <assert-string-value>NaN</assert-string-value>
      </result>
   </test-case>
   <test-case name="numberformat39">
      <description>
        Creator: David Marston 
        Purpose: Test result pattern for negative infinity, unchanged. </description>
      <created by="Michael Kay, Saxonica" on="2010-12-13"/>
      <!--SOURCE: numberformat/numberformat39.xml-->
      <environment/>
      <test>format-number(-1 div 0e0,'###############################')</test>
      <result>
         <assert-string-value>-Infinity</assert-string-value>
      </result>
   </test-case>
   <test-case name="numberformat40">
      <description>
        Creator: David Marston 
        Purpose: Test specification of result pattern for infinity</description>
      <created by="Michael Kay, Saxonica" on="2010-12-13"/>
      <!--SOURCE: numberformat/numberformat40.xml-->
      <environment>
         <decimal-format infinity="huge"/>
      </environment>
      <test>format-number(-1 div 0e0,'###############################')</test>
      <result>
         <assert-string-value>-huge</assert-string-value>
      </result>
   </test-case>
   <test-case name="numberformat41">
      <description>
        Creator: David Bertoni 
        Purpose: Test of multiple decimal-format elements with identical qualified names.</description>
      <created by="Michael Kay, Saxonica" on="2010-12-13"/>
      <modified by="O'Neil Delpratt, Saxonica" on="2012-10-26" change="Bug fix #19716" />
      <modified by="Michael Kay, Saxonica" on="2013-04-24" change="Bug fix #19716" />
      <!--SOURCE: numberformat/numberformat41.xml-->
      <environment>
         <namespace prefix="foo" uri="http://foo.ns"/>
         <namespace prefix="baz" uri="http://foo.ns"/>
         <decimal-format xmlns:foo="http://foo.ns" name="foo:decimal1" minus-sign="-" NaN="not a number" decimal-separator="."/>
      </environment>
      <dependency type="feature" value="xpath-1.0-compatibility"/>
      <dependency type="spec" value="XP30+"/>
      <test>string-join((
                format-number('NaN','###','foo:decimal1'),
                format-number(-13.2,'###.0','foo:decimal1'),
                format-number('NaN','###','baz:decimal1'),
                format-number(-13.2,'###.0','baz:decimal1')), '|')</test>
      <result>
         <assert-string-value>not a number|-13.2|not a number|-13.2</assert-string-value>
      </result>
   </test-case>
   <test-case name="numberformat42">
      <description>
        Creator: David Bertoni 
        Purpose: Test of multiple decimal-format elements with identical names.</description>
      <created by="Michael Kay, Saxonica" on="2010-12-13"/>
      <modified by="Michael Kay, Saxonica" on="2013-04-24" change="Bug fix #19716" />
      <!--SOURCE: numberformat/numberformat42.xml-->
      <environment>
         <decimal-format name="decimal2" zero-digit="0" NaN="not a number" decimal-separator="."/>
      </environment>
      <dependency type="feature" value="xpath-1.0-compatibility"/>
      <dependency type="spec" value="XP30+"/>
      <test>concat(format-number('NaN','###','decimal2'), '|',
                      format-number(3.2,'###.0','decimal2'))</test>
      <result>
         <assert-string-value>not a number|3.2</assert-string-value>
      </result>
   </test-case>
   <!-- numberformat43 - XSLT-specific -->
   <!-- numberformat44 - XSLT-specific -->
   <!-- numberformat45 - XSLT-specific -->
   <!-- numberformat46 - XSLT-specific -->
   
   <test-case name="numberformat60a">
      <description>
        Test format-number() applied to large numbers (test how good the rounding is)
        Bug report from Pedro Christian against Saxon 7.8
      </description>  
      <created by="Michael Kay, Saxonica" on="2010-12-13"/>
      <modified by="Michael Kay" on="2012-05-18" change="split compound test into separate parts"/>
      <test>format-number(1E25,'#,######')</test>
      <result>
        <assert-string-value>10,000000,000000,000000,000000</assert-string-value>
      </result>
   </test-case>
   
   <test-case name="numberformat60b">
      <description>
        Test format-number() applied to large numbers (test how good the rounding is)
        Bug report from Pedro Christian against Saxon 7.8
      </description>  
      <created by="Michael Kay, Saxonica" on="2010-12-13"/>
      <modified by="Michael Kay" on="2012-05-18" change="split compound test into separate parts"/>
      <test>format-number(1E10,'#####################')</test>
      <result>
        <assert-string-value>10000000000</assert-string-value>
      </result>
   </test-case>
   
   <test-case name="numberformat60c">
      <description>
        Test format-number() applied to large numbers (test how good the rounding is)
        Bug report from Pedro Christian against Saxon 7.8
      </description>  
      <created by="Michael Kay, Saxonica" on="2010-12-13"/>
      <modified by="Michael Kay" on="2012-05-18" change="split compound test into separate parts"/>
      <test>format-number(1E11,'#####################')</test>
      <result>
        <assert-string-value>100000000000</assert-string-value>
      </result>
   </test-case>
   
   <test-case name="numberformat60d">
      <description>
        Test format-number() applied to large numbers (test how good the rounding is)
        Bug report from Pedro Christian against Saxon 7.8
      </description>  
      <created by="Michael Kay, Saxonica" on="2010-12-13"/>
      <modified by="Michael Kay" on="2012-05-18" change="split compound test into separate parts"/>
      <test>format-number(1E12,'#####################')</test>
      <result>
        <assert-string-value>1000000000000</assert-string-value>
      </result>
   </test-case>
   
   <test-case name="numberformat60e">
      <description>
        Test format-number() applied to large numbers (test how good the rounding is)
        Bug report from Pedro Christian against Saxon 7.8
      </description>  
      <created by="Michael Kay, Saxonica" on="2010-12-13"/>
      <modified by="Michael Kay" on="2012-05-18" change="split compound test into separate parts"/>
      <test>format-number(1E13,'#####################')</test>
      <result>
        <assert-string-value>10000000000000</assert-string-value>
      </result>
   </test-case>
   
   <test-case name="numberformat60f">
      <description>
        Test format-number() applied to large numbers (test how good the rounding is)
        Bug report from Pedro Christian against Saxon 7.8
      </description>  
      <created by="Michael Kay, Saxonica" on="2010-12-13"/>
      <modified by="Michael Kay" on="2012-05-18" change="split compound test into separate parts"/>
      <test>format-number(1E14,'#####################')</test>
      <result>
        <assert-string-value>100000000000000</assert-string-value>
      </result>
   </test-case>
   
   <test-case name="numberformat60g">
      <description>
        Test format-number() applied to large numbers (test how good the rounding is)
        Bug report from Pedro Christian against Saxon 7.8
      </description>  
      <created by="Michael Kay, Saxonica" on="2010-12-13"/>
      <modified by="Michael Kay" on="2012-05-18" change="split compound test into separate parts"/>
      <test>format-number(1E15,'#####################')</test>
      <result>
        <assert-string-value>1000000000000000</assert-string-value>
      </result>
   </test-case>
   
   <test-case name="numberformat60h">
      <description>
        Test format-number() applied to large numbers (test how good the rounding is)
        Bug report from Pedro Christian against Saxon 7.8
      </description>  
      <created by="Michael Kay, Saxonica" on="2010-12-13"/>
      <modified by="Michael Kay" on="2012-05-18" change="split compound test into separate parts"/>
      <test>format-number(1E16,'#####################')</test>
      <result>
        <assert-string-value>10000000000000000</assert-string-value>
      </result>
   </test-case>
   
   <test-case name="numberformat60i">
      <description>
        Test format-number() applied to large numbers (test how good the rounding is)
        Bug report from Pedro Christian against Saxon 7.8
      </description>  
      <created by="Michael Kay, Saxonica" on="2010-12-13"/>
      <modified by="Michael Kay" on="2012-05-18" change="split compound test into separate parts"/>
      <test>format-number(1E17,'#####################')</test>
      <result>
        <assert-string-value>100000000000000000</assert-string-value>
      </result>
   </test-case>
   
   <test-case name="numberformat60j">
      <description>
        Test format-number() applied to large numbers (test how good the rounding is)
        Bug report from Pedro Christian against Saxon 7.8
      </description>  
      <created by="Michael Kay, Saxonica" on="2010-12-13"/>
      <modified by="Michael Kay" on="2012-05-18" change="split compound test into separate parts"/>
      <test>format-number(1E18,'#####################')</test>
      <result>
        <assert-string-value>1000000000000000000</assert-string-value>
      </result>
   </test-case>
   
   <test-case name="numberformat60k">
      <description>
        Test format-number() applied to large numbers (test how good the rounding is)
        Bug report from Pedro Christian against Saxon 7.8
      </description>  
      <created by="Michael Kay, Saxonica" on="2010-12-13"/>
      <modified by="Michael Kay" on="2012-05-18" change="split compound test into separate parts"/>
      <test>format-number(1E19,'#####################')</test>
      <result>
        <assert-string-value>10000000000000000000</assert-string-value>
      </result>
   </test-case>
   
   <test-case name="numberformat60l">
      <description>
        Test format-number() applied to large numbers (test how good the rounding is)
        Bug report from Pedro Christian against Saxon 7.8
      </description>  
      <created by="Michael Kay, Saxonica" on="2010-12-13"/>
      <modified by="Michael Kay" on="2012-05-18" change="split compound test into separate parts"/>
      <test>format-number(1E20,'#####################')</test>
      <result>
        <assert-string-value>100000000000000000000</assert-string-value>
      </result>
   </test-case>
   
   <test-case name="numberformat60m">
      <description>
        Test format-number() applied to large numbers (test how good the rounding is)
        Bug report from Pedro Christian against Saxon 7.8
      </description>  
      <created by="Michael Kay, Saxonica" on="2010-12-13"/>
      <modified by="Michael Kay" on="2012-05-18" change="split compound test into separate parts"/>
      <test>format-number(1E25,'#####################')</test>
      <result>
        <assert-string-value>10000000000000000000000000</assert-string-value>
      </result>
   </test-case>
   
   <test-case name="numberformat60n">
      <description>
        Test format-number() applied to large numbers (test how good the rounding is)
        Bug report from Pedro Christian against Saxon 7.8
      </description>  
      <created by="Michael Kay, Saxonica" on="2010-12-13"/>
      <modified by="Michael Kay" on="2012-05-18" change="split compound test into separate parts"/>
      <test>format-number(1E30,'#####################')</test>
      <result>
        <assert-string-value>1000000000000000000000000000000</assert-string-value>
      </result>
   </test-case>
   
   <test-case name="numberformat60o">
      <description>
        Test format-number() applied to large numbers (test how good the rounding is)
        Bug report from Pedro Christian against Saxon 7.8
      </description>  
      <created by="Michael Kay, Saxonica" on="2010-12-13"/>
      <modified by="Michael Kay" on="2012-05-18" change="split compound test into separate parts"/>
      <test>format-number(1E35,'#####################')</test>
      <result>
        <assert-string-value>100000000000000000000000000000000000</assert-string-value>
      </result>
   </test-case>
   
   <test-case name="numberformat60p">
      <description>
        Test format-number() applied to large numbers (test how good the rounding is)
        Bug report from Pedro Christian against Saxon 7.8
      </description>  
      <created by="Michael Kay, Saxonica" on="2010-12-13"/>
      <modified by="Michael Kay" on="2012-05-18" change="split compound test into separate parts"/>
      <test>format-number(1E100,'#####################')</test>
      <result>
        <assert-string-value>10000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000</assert-string-value>
      </result>
   </test-case>
   
   <test-case name="numberformat60q">
      <description>
        Test format-number() applied to large numbers (test how good the rounding is)
        Bug report from Pedro Christian against Saxon 7.8
      </description>  
      <created by="Michael Kay, Saxonica" on="2010-12-13"/>
      <modified by="Michael Kay" on="2012-05-17" change="changed expected result for 1e100 div 3 as per bug 14934"/>
      <modified by="Michael Kay" on="2012-05-18" change="split compound test into separate parts"/>
      <test>format-number(1E100 div 3,'#####################')</test>
      <result>
        <assert-string-value>3333333333333333000000000000000000000000000000000000000000000000000000000000000000000000000000000000</assert-string-value>
      </result>
   </test-case>     

   <test-case name="numberformat61">
      <description>
        format-number() applied to an empty sequence
      </description>
      <created by="Michael Kay, Saxonica" on="2010-12-13"/>
      <!--SOURCE: numberformat/stdxmlfile.xml-->
      <environment/>
      <test>format-number((),'###.###')</test>
      <result>
         <assert-string-value>NaN</assert-string-value>
      </result>
   </test-case>
   <!-- numberformat62 is XSLT-specific-->
 
   <test-case name="numberformat63">
      <description>
        Purpose: Test formatting of a high-precision decimal value. </description>
      <created by="Michael Kay, Saxonica" on="2010-12-13"/>
      <modified by="Michael Kay" on="2012-05-17" change="see bug 14933"/>
      <!--SOURCE: numberformat/stdxmlfile.xml-->
      <environment/>
      <test>format-number(000123456789012345678901234567890.123456789012345678900000,     '##0.0####################################################')</test>
      <result>
        <any-of>
          <assert-string-value>123456789012345678901234567890.1234567890123456789</assert-string-value>
          <error code="FOAR0002"/>
        </any-of>  
      </result>
   </test-case>
   <test-case name="numberformat64">
      <description>
        Purpose: Test formatting of a high-precision integer value. </description>
      <created by="Michael Kay, Saxonica" on="2010-12-13"/>
      <modified by="Michael Kay" on="2012-05-17" change="see bug 14933"/>
      <!--SOURCE: numberformat/stdxmlfile.xml-->
      <environment>
         <decimal-format grouping-separator=" "/>
      </environment>   
      <test>format-number(000123456789012345678901234567890123456789012345678900000,     '# #0.0####################################################')</test>
      <result>
         <any-of>
           <assert-string-value>12 34 56 78 90 12 34 56 78 90 12 34 56 78 90 12 34 56 78 90 12 34 56 78 90 00 00.0</assert-string-value>
           <error code="FOAR0002"/>
         </any-of>  
      </result>
   </test-case>
   <test-case name="numberformat65">
      <description>
        Purpose: Test that a trailing decimalpoint is removed. 
      </description>
      <created by="Michael Kay, Saxonica" on="2010-12-13"/>
      <!--SOURCE: numberformat/stdxmlfile.xml-->
      <environment>
         <decimal-format grouping-separator=" "/>
      </environment>
      <test>concat(format-number(1234e0, '0000.####'), '|',
                    format-number(1234.00, '0000.####'))</test>
      <result>
         <assert-string-value>1234|1234</assert-string-value>
      </result>
   </test-case>
   <test-case name="numberformat70">
      <description>
        Decimal separator and grouping separator in the astral planes
      </description>
      <created by="Michael Kay, Saxonica" on="2010-12-13"/>
      <!--SOURCE: numberformat/stdxmlfile.xml-->
      <environment>
         <decimal-format decimal-separator="&#110000;" grouping-separator="&#110001;"/>
      </environment>
      <test>format-number(1234567890.123456,'&#110001;000&#110000;000')</test>
      <result>
         <assert-string-value>1&#110001;234&#110001;567&#110001;890&#110000;123</assert-string-value>
      </result>
   </test-case>
   <test-case name="numberformat71">
      <description>
        Use Osmanya digits (non-BMP) in formatted output
      </description> 
      <created by="Michael Kay, Saxonica" on="2010-12-13"/>
      <environment>
         <decimal-format zero-digit="&#66720;"/>
      </environment>
      <test>format-number(1234567890.123456,'##########&#66720;.&#66720;#####')</test>
      <result>
         <assert-string-value>&#66721;&#66722;&#66723;&#66724;&#66725;&#66726;&#66727;&#66728;&#66729;&#66720;.&#66721;&#66722;&#66723;&#66724;&#66725;&#66726;</assert-string-value>
      </result>
   </test-case>
   <test-case name="numberformat72">
      <description>
        Check that overflow isn't an error
      </description>
      <created by="Michael Kay, Saxonica" on="2010-12-13"/>
      <environment/>
      <test>format-number(1234567890.123456,'000.000')</test>
      <result>
         <assert-string-value>1234567890.123</assert-string-value>
      </result>
   </test-case>
   <test-case name="numberformat80">
      <description>
        PURPOSE: test format-number() with two arguments
      </description> 
      <created by="Michael Kay, Saxonica" on="2010-12-13"/>
      <environment/>
      <test>format-number(12.34, '##.##')</test>
      <result>
         <assert-string-value>12.34</assert-string-value>
      </result>
   </test-case>
   <test-case name="numberformat81">
      <description>
        PURPOSE: test format-number() with three arguments; also tests use of whitespace in name
      </description> 
      <created by="Michael Kay, Saxonica" on="2010-12-13"/>
      <environment>
         <namespace prefix="a" uri="http://a.ns/"/>
         <namespace prefix="b" uri="http://a.ns/"/>
         <decimal-format xmlns:a="http://a.ns/" name="a:test" decimal-separator="," grouping-separator="."/>
      </environment>
      <test>format-number(12.34, '0.000,00', ' b:test ')</test>
      <result>
         <assert-string-value>0.012,34</assert-string-value>
      </result>
   </test-case>
   
   <test-case name="numberformat82">
      <description>
        PURPOSE: test format-number() where third argument is not known statically
      </description> 
      <created by="Michael Kay, Saxonica" on="2013-01-21"/>
      <environment>
         <decimal-format name="one" decimal-separator="." grouping-separator=","/>
         <decimal-format name="two" decimal-separator="," grouping-separator="."/>
      </environment>
      <test>format-number(12.34, '0.000,00', if (current-date() gt xs:date('1900-01-01')) then 'two' else 'one')</test>
      <result>
         <assert-string-value>0.012,34</assert-string-value>
      </result>
   </test-case>
   
   <test-case name="numberformat83">
      <description>
        PURPOSE: test format-number() where third argument is not known statically and depends on namespace context; 
        also tests use of whitespace in name
      </description> 
      <created by="Michael Kay, Saxonica" on="2013-01-21"/>
      <environment>
         <namespace prefix="a" uri="http://a.ns/"/>
         <namespace prefix="b" uri="http://b.ns/"/>
         <decimal-format xmlns:x="http://a.ns/" name="x:one" decimal-separator="." grouping-separator=","/>
         <decimal-format xmlns:y="http://b.ns/" name="y:one" decimal-separator="," grouping-separator="."/>
      </environment>
      <test>format-number(12.34, '0.000,00', concat(if (current-date() lt xs:date('1900-01-01')) then ' a' else ' b', ':one '))</test>
      <result>
         <assert-string-value>0.012,34</assert-string-value>
      </result>
   </test-case>

   <test-case name="numberformat84">
      <description>
        PURPOSE: test format-number() with grouping separator
      </description>
      <created by="Michael Kay, Saxonica" on="2010-12-13"/>
      <!--SOURCE: numberformat/numberformat84.xml-->
      <environment/>
      <test>format-number(123456789.34, '#,###.##')</test>
      <result>
         <assert-string-value>123,456,789.34</assert-string-value>
      </result>
   </test-case>
   
   <test-case name="numberformat85">
      <description>
        PURPOSE: test special case of format-number() imposing minWholePartSize = 1 with different data types
      </description>
      <created by="Michael Kay, Saxonica" on="2010-12-13"/>
      <!--SOURCE: numberformat/numberformat84.xml-->
      <environment/>
      <test>string-join((
                format-number(0, '#'),
                format-number(0.0, '#'),
                format-number(0.0e0, '#'),
                format-number(xs:float(0), '#')), '|')
        
      </test>
      <result>
         <assert-string-value>0|0|0|0</assert-string-value>
      </result>
   </test-case>
   
   <test-case name="numberformat86">
      <description>In 3.0, () allowed as third argument (bug 14931)</description>
      <created by="Michael Kay, Saxonica" on="2011-12-06"/>
      <dependency type="spec" value="XQ30+ XP30+"/>
      <test>format-number(0.4857,'###.###%', ())</test>
      <result>
         <assert-string-value>48.57%</assert-string-value>
      </result>
   </test-case>
   
   <test-case name="numberformat87">
      <description>
        PURPOSE: test format-number() with EQName for third argument, known statically; also tests use of whitespace in name
      </description> 
      <created by="Michael Kay, Saxonica" on="2013-01-21"/>
      <environment>
         <decimal-format xmlns:a="http://a.ns/" name="a:test" decimal-separator="," grouping-separator="."/>
      </environment>
      <test>format-number(12.34, '0.000,00', 'Q{http://a.ns/}test ')</test>
      <result>
         <assert-string-value>0.012,34</assert-string-value>
      </result>
   </test-case>
   
   <test-case name="numberformat88">
      <description>
        PURPOSE: test format-number() with EQName for third argument, not known statically; also tests use of whitespace in name
      </description> 
      <created by="Michael Kay, Saxonica" on="2013-01-21"/>
      <environment>
         <decimal-format xmlns:a="http://a.ns/" name="a:test" decimal-separator="," grouping-separator="."/>
      </environment>
      <test>format-number(12.34, '0.000,00', if (current-date() lt xs:date('1900-01-01')) then () else ' Q{http://a.ns/}test')</test>
      <result>
         <assert-string-value>0.012,34</assert-string-value>
      </result>
   </test-case>
  
  <test-case name="numberformat89">
    <description>
      PURPOSE: test format-number() with using "9" rather than "0" in picture
    </description> 
    <created by="Michael Kay, Saxonica" on="2013-05-15"/>
    <test>format-number(12.34, '9,999.99')</test>
    <result>
      <assert-string-value>0,012.34</assert-string-value>
    </result>
  </test-case>
  
  <test-case name="numberformat90">
    <description>
      PURPOSE: test format-number() with using "9" rather than "0" in picture, along with '#'
    </description> 
    <created by="Michael Kay, Saxonica" on="2013-05-15"/>
    <test>format-number(12.34, '#,##9.99')</test>
    <result>
      <assert-string-value>12.34</assert-string-value>
    </result>
  </test-case>
  
  <test-case name="numberformat91">
    <description>
      PURPOSE: test format-number() with using "001" rather than "000" in picture
    </description> 
    <created by="Michael Kay, Saxonica" on="2013-05-15"/>
    <test>format-number(42, '001')</test>
    <result>
      <assert-string-value>042</assert-string-value>
    </result>
  </test-case>
  
  <test-case name="numberformat92">
    <description>
      PURPOSE: test format-number() with pattern in which fractional part has size zero
    </description>
    <created by="Debbie Lockett" on="2015-04-22"/>
    <test>
      fn:format-number(12345.678, '9.')
    </test>
    <result>
      <assert-string-value>12346</assert-string-value>
    </result>
  </test-case>
  
  <test-case name="numberformat93">
    <description>
      PURPOSE: test format-number() with pattern in which fractional part has size zero
    </description>
    <created by="Debbie Lockett" on="2015-04-22"/>
    <test>
      fn:format-number(12345.000, '99999.')
    </test>
    <result>
      <assert-string-value>12345</assert-string-value>
    </result>
  </test-case>
  
  <test-case name="numberformat94">
    <description>
      PURPOSE: test format-number() with pattern in which min integer part size is zero
    </description>
    <created by="Debbie Lockett" on="2015-04-22"/>
    <test>
      fn:format-number(12345.678, '.9')
    </test>
    <result>
      <assert-string-value>12345.7</assert-string-value>
    </result>
  </test-case>
  
  <test-case name="numberformat95">
    <description>
      PURPOSE: test format-number() with pattern in which min integer part size is zero
    </description>
    <created by="Debbie Lockett" on="2015-04-22"/>
    <test>
      fn:format-number(0.2, '.#')
    </test>
    <result>
      <assert-string-value>.2</assert-string-value>
    </result>
  </test-case>

  <test-case name="numberformat101" covers="fn-format-number">
    <description>
      PURPOSE: test format-number() using default decimal-format declaration with appropriate pattern
    </description> 
    <created by="Jim Melton" on="2014-12-05"/>
    <dependency type="spec" value="XP31+ XQ31+"/>
    <test>format-number(12345.678, '9.9999e999')</test>
    <result>
      <assert-string-value>1.2346e004</assert-string-value>
    </result>
  </test-case>
   
  <test-case name="numberformat102" covers="fn-format-number">
    <description>
      PURPOSE: test format-number() using default decimal-format declaration with INappropriate pattern 
    </description> 
    <created by="Jim Melton" on="2014-12-05"/>
    <dependency type="spec" value="XP31+ XQ31+"/>
    <test>format-number(12345.678, '9.9999E999')</test>
    <result>
      <error code="FODF1310"/>
    </result>
  </test-case>
   
  <test-case name="numberformat103" covers="fn-format-number exponent-separator">
    <description>
      PURPOSE: test format-number() changing default decimal-format declaration to use "E" with appropriate pattern
    </description> 
    <created by="Jim Melton" on="2014-12-05"/>
    <dependency type="spec" value="XQ31+"/>
    <test>
      declare default decimal-format exponent-separator="E";
      let $x := fn:format-number(12345.678, '9.9999E999')
      return $x
    </test>
    <result>
      <assert-string-value>1.2346E004</assert-string-value>
    </result>
  </test-case>
     
  <test-case name="numberformat104" covers="fn-format-number exponent-separator">
    <description>
      PURPOSE: test format-number() changing default decimal-format declaration to use "E" with INappropriate pattern
    </description> 
    <created by="Jim Melton" on="2014-12-05"/>
    <dependency type="spec" value="XQ31+"/>
    <test>
      declare default decimal-format exponent-separator="E";
      let $x := fn:format-number(12345.678, '9.9999e999')
      return $x
    </test>
    <result>
      <error code="FODF1310"/>
    </result>
  </test-case>
   
  <test-case name="numberformat105" covers="fn-format-number exponent-separator">
    <description>
      PURPOSE: test format-number() with named decimal-format declaration using "E" with appropriate pattern
    </description> 
    <created by="Jim Melton" on="2014-12-05"/>
    <dependency type="spec" value="XQ31+"/>
    <test>
      declare decimal-format exp-E exponent-separator="E";
      let $x := fn:format-number(12345.678, '9.9999E999', 'exp-E')
      return $x
    </test>
    <result>
      <assert-string-value>1.2346E004</assert-string-value>
    </result>
  </test-case>
   
  <test-case name="numberformat106" covers="fn-format-number exponent-separator">
    <description>
      PURPOSE: test format-number() with named decimal-format declaration using "E" with INappropriate pattern
    </description> 
    <created by="Jim Melton" on="2014-12-05"/>
    <dependency type="spec" value="XQ31+"/>
    <test>
      declare decimal-format exp-e exponent-separator="e";
      let $x := fn:format-number(12345.678, '9.9999E999', 'exp-e')
      return $x
    </test>
    <result>
      <error code="FODF1310"/>
    </result>
  </test-case>
   
  <test-case name="numberformat107" covers="fn-format-number">
    <description>
      PURPOSE: test format-number() with name of no such named format
    </description> 
    <created by="Jim Melton" on="2014-12-05"/>
    <dependency type="spec" value="XP31+ XQ31+"/>
    <test>
      let $x := fn:format-number(12345.678, '9.9999E999', 'BadFormat')
      return $x
    </test>
    <result>
      <error code="FODF1280"/>
    </result>
  </test-case>
   
  <test-case name="numberformat108" covers="fn-format-number">
    <description>
      PURPOSE: test format-number() with two exponent separators
    </description> 
    <created by="Jim Melton" on="2014-12-05"/>
    <dependency type="spec" value="XP31+ XQ31+"/>
    <test>
      let $x := fn:format-number(12345.678, '9.99e99e99')
      return $x
    </test>
    <result>
      <error code="FODF1310"/>
    </result>
  </test-case>
   
  <test-case name="numberformat109" covers="fn-format-number exponent-separator">
    <description>
      PURPOSE: test format-number() with named format and bizarre exponent separator
    </description> 
    <created by="Jim Melton" on="2014-12-05"/>
    <dependency type="spec" value="XQ31+"/>
    <test>
      declare decimal-format exp-bizarre exponent-separator="&#10000;";
      let $x := fn:format-number(12345.678, '9.9999&#10000;999', 'exp-bizarre')
      return $x
    </test>
    <result>
      <assert-string-value>1.2346&#10000;004</assert-string-value>
    </result>
  </test-case>
   
  <test-case name="numberformat110" covers="fn-format-number">
    <description>
      PURPOSE: test format-number() with exponent-separator and percent sign
    </description>
    <created by="Jim Melton" on="2014-12-05"/>
    <modified by="Debbie Lockett, Saxonica" on="2015-04-22" change="add XP31+ to dependency"/>
    <dependency type="spec" value="XP31+ XQ31+"/>
    <test>
      let $x := fn:format-number(12345.678, '9.9999e999%')
      return $x
    </test>  
    <result>
      <error code="FODF1310"/>
    </result>
  </test-case>
   
  <test-case name="numberformat111" covers="fn-format-number exponent-separator">
    <description>
      PURPOSE: test format-number() with named format in which exponent-separator has been set to '%'
    </description> 
    <created by="Jim Melton" on="2014-12-05"/>
    <dependency type="spec" value="XQ31+"/>
    <test>
      declare decimal-format exp-p exponent-separator="%";
      let $x := fn:format-number(12345.678, '9.9999%999', 'exp-p')
      return $x
    </test>
    <result>
      <error code="XQST0098"/>
    </result>
  </test-case>

  <test-case name="numberformat112" covers="fn-format-number exponent-separator">
    <description>
      PURPOSE: test format-number() with named format in which exponent-separator has been set to '%' and per-cent has been set to '!'
    </description> 
    <created by="Jim Melton" on="2014-12-05"/>
    <dependency type="spec" value="XQ31+"/>
    <test>
      declare decimal-format exp-p percent="!" exponent-separator="%";
      let $x := fn:format-number(12345.678, '9.9999%999', 'exp-p')
      return $x
    </test>
    <result>
      <assert-string-value>1.2346%004</assert-string-value>
    </result>
  </test-case>
   
  <test-case name="numberformat113" covers="fn-format-number">
    <description>
      PURPOSE: test format-number() with pattern in which exponent-separator is followed by passive character
    </description>
    <created by="Jim Melton" on="2014-12-05"/>
    <dependency type="spec" value="XP31+ XQ31+"/>
    <test>
      let $x := fn:format-number(12345.678, '9.9999eDog')
      return $x
    </test>
    <result>
      <assert-string-value>12345.6780eDog</assert-string-value>
    </result>
  </test-case>

  <test-case name="numberformat114" covers="fn-format-number">
    <description>
      PURPOSE: test format-number() with pattern in which exponent-separator is followed by active character, not digit
    </description>
    <created by="Jim Melton" on="2014-12-05"/>
    <dependency type="spec" value="XP31+ XQ31+"/>
    <test>
      let $x := fn:format-number(12345.678, '9.9999e,')
      return $x
    </test>
    <result>
      <error code="FODF1310"/>
    </result>
  </test-case>
   
  <test-case name="numberformat115" covers="fn-format-number">
    <description>
      PURPOSE: test format-number() with an integer instead of a decimal
    </description>
    <created by="Jim Melton" on="2014-12-05"/>
    <dependency type="spec" value="XP31+ XQ31+"/>
    <test>
      let $x := fn:format-number(12345, '9.9999e99')
      return $x
    </test>
    <result>
      <assert-string-value>1.2345e04</assert-string-value>
    </result>
  </test-case>

  <test-case name="numberformat116" covers="fn-format-number">
    <description>
      PURPOSE: test format-number() with a smaller integer instead of a decimal
    </description>   
    <created by="Jim Melton" on="2014-12-05"/>
    <dependency type="spec" value="XP31+ XQ31+"/>
    <test>
      let $x := fn:format-number(5, '9.9999e99')
      return $x
    </test>
    <result>
      <assert-string-value>5.0000e00</assert-string-value>
    </result>
  </test-case>
   
  <test-case name="numberformat117" covers="fn-format-number">
    <description>
      PURPOSE: test format-number() with a fractional decimal
      (bug 28568 raised against expected result)
    </description>
    <created by="Jim Melton" on="2014-12-05"/>
    <modified by="O'Neil Delpratt, Saxonica" change="expected result according to bug #28568" on="2015-05-05"/>
    <dependency type="spec" value="XP31+ XQ31+"/>
    <test>
      let $x := fn:format-number(.05, '9.9999e99')
      return $x
    </test>
    <result>
      <assert-string-value>5.0000e-02</assert-string-value>
    </result>
  </test-case>
   
  <test-case name="numberformat118" covers="fn-format-number">
    <description>
      PURPOSE: test format-number() with a real number
    </description>
    <created by="Jim Melton" on="2014-12-05"/>
    <dependency type="spec" value="XP31+ XQ31+"/>
    <test>
      let $x := fn:format-number(123.45E7, '9.9999e99')
      return $x
    </test>
    <result>
      <assert-string-value>1.2345e09</assert-string-value>
    </result>
  </test-case>
    
  <test-case name="numberformat119" covers="fn-format-number">
    <description>
      PURPOSE: test format-number() with a decimal having higher precision than a double
    </description>
    <created by="Michael Kay" on="2015-04-22"/>
    <modified by="Debbie Lockett, Saxonica" on="2015-04-24" change="Edit fractional part in picture"/>
    <dependency type="spec" value="XP31+ XQ31+"/>
    <test>
      fn:format-number(0.900001000020000345, '9.99999999999999999e99')
    </test>
    <result>
      <assert-string-value>9.00001000020000345e-01</assert-string-value>
    </result>
  </test-case>
  
  <test-case name="numberformat120" covers="fn-format-number">
    <description>
      PURPOSE: test format-number() with an integer having higher precision than a double
    </description>
    <created by="Michael Kay" on="2015-04-22"/>
    <modified by="Debbie Lockett, Saxonica" on="2015-04-24" change="Edit fractional part in picture"/>
    <dependency type="spec" value="XP31+ XQ31+"/>
    <test>
      fn:format-number(123456789012345678, '9.99999999999999999e99')
    </test>
    <result>
      <assert-string-value>1.23456789012345678e17</assert-string-value>
    </result>
  </test-case>
  
  <test-case name="numberformat121" covers="fn-format-number">
    <description>
      PURPOSE: test format-number() with a decimal having higher exponent than a double
    </description>
    <created by="Michael Kay" on="2015-04-22"/>
    <modified by="O'Neil Delpratt" on="2015-07-30" change="Added error code according to bug issue #28843" />
    <dependency type="spec" value="XQ31+"/>
    <test>
      declare function local:timesTenToThe($n as xs:decimal, $exp as xs:integer) as xs:decimal {
        if ($exp eq 0)
          then $n
        else if ($exp gt 0)
          then ($n*10) => local:timesTenToThe($exp - 1)
        else 
          ($n div 10) => local:timesTenToThe($exp + 1)  
      };    
      fn:format-number(1 => local:timesTenToThe(5000), '9.9999e9999')
    </test>
    <result>
      <any-of>
        <assert-string-value>1.0000e5000</assert-string-value>
        <error code="FOAR0002"/>
      </any-of>
    </result>
  </test-case>
  
  <test-case name="numberformat122" covers="fn-format-number">
    <description>
      PURPOSE: test format-number() with a decimal having smaller negative exponent than a double
    </description>
    <created by="Michael Kay" on="2015-04-22"/>
    <modified by="O'Neil Delpratt" on="2015-07-30" change="Added alternative result according to bug issue #28843" />
    <dependency type="spec" value="XQ31+"/>
    <test>
      declare function local:timesTenToThe($n as xs:decimal, $exp as xs:integer) as xs:decimal {
        if ($exp eq 0)
          then $n
        else if ($exp gt 0)
          then ($n*10) => local:timesTenToThe($exp - 1)
        else 
          ($n div 10) => local:timesTenToThe($exp + 1)  
      };    
      fn:format-number(1 => local:timesTenToThe(-5000), '0.0000e0001')
    </test>
    <result>
      <any-of>
        <assert-string-value>1.0000e-5000</assert-string-value>
        <assert-string-value>0.0000e0000</assert-string-value>
      </any-of>
    </result>
  </test-case>
  
  <test-case name="numberformat123" covers="fn-format-number">
      <description>
        Use Osmanya digits (non-BMP) in scientific format output
      </description> 
      <created by="Michael Kay" on="2015-04-22"/>
    <modified by="Debbie Lockett, Saxonica" on="2015-04-27" change="added spec dependencies"/>
      <dependency type="spec" value="XQ31+ XP31+"/>
      <environment>
         <decimal-format zero-digit="&#66720;"/>
      </environment>
      <test>format-number(1.0,'&#66720;.&#66720;e&#66720;')</test>
      <result>
         <assert-string-value>&#66721;.&#66720;e&#66720;</assert-string-value>
      </result>
   </test-case>
   
   <test-case name="numberformat124" covers="fn-format-number exponent-separator">
    <description>
      PURPOSE: exponent separator more than one character
    </description> 
    <created by="Michael Kay" on="2015-04-22"/>
    <dependency type="spec" value="XQ31+"/>
    <test>
      declare decimal-format exp-E exponent-separator="x10^";
      fn:format-number(12345.678, '9.9999x10^999', 'exp-E')
    </test>
    <result>
      <error code="XQST0097"/>
    </result>
  </test-case>
  
  <test-case name="numberformat125" covers="fn-format-number exponent-separator">
    <description>
      PURPOSE: exponent separator is repeated
    </description> 
    <created by="Michael Kay" on="2015-04-22"/>
    <dependency type="spec" value="XQ31+"/>
    <test>
      declare decimal-format exp-E exponent-separator="e" exponent-separator="E";
      fn:format-number(12345.678, '9.9999E999', 'exp-E')
    </test>
    <result>
      <error code="XQST0114"/>
    </result>
  </test-case>
  
  <test-case name="numberformat126" covers="fn-format-number exponent-separator">
    <description>
      PURPOSE: exponent separator conflicts with digit sign
    </description> 
    <created by="Michael Kay" on="2015-04-22"/>
    <dependency type="spec" value="XQ31+"/>
    <test>
      declare decimal-format exp-E exponent-separator="#";
      fn:format-number(12345.678, '9.9999#999', 'exp-E')
    </test>
    <result>
      <error code="XQST0098"/>
    </result>
  </test-case>
  
  <test-case name="numberformat127" covers-30="fn-format-number">
      <description>
         PURPOSE: exponent separator rejected in 3.0
      </description>
      <created by="Michael Kay" on="2015-04-22"/>
      <modified by="O'Neil Delpratt" on="2016-09-08" change="Changed covers attribute to covers-30" />
    <dependency type="spec" value="XQ30"/>
    <test>
      declare decimal-format exp-E exponent-separator="E";
      fn:format-number(12345.678, '9.9999E999', 'exp-E')
    </test>
    <result>
      <error code="XPST0003"/>
    </result>
  </test-case>
  
  <test-case name="numberformat128" covers-30="fn-format-number">
    <description>
      PURPOSE: exponent separator rejected in 3.0
    </description> 
    <created by="Michael Kay" on="2015-04-22"/>
    <modified by="O'Neil Delpratt" on="2016-09-08" change="Changed covers attribute to covers-30" />
    <dependency type="spec" value="XQ30 XP30"/>
    <test>
      fn:format-number(12345.678, '9.9999e999')
    </test>
    <result>
      <error code="FODF1310"/>
    </result>
  </test-case>
  
  <test-case name="numberformat129" covers="fn-format-number">
    <description>
      PURPOSE: test format-number() with pattern in which integer part of mantissa has more than one digit
    </description>
    <created by="Debbie Lockett" on="2015-04-22"/>
    <dependency type="spec" value="XP31+ XQ31+"/>
    <test>
      fn:format-number(12345.678, '999.99e99')
    </test>
    <result>
      <assert-string-value>123.46e02</assert-string-value>
    </result>
  </test-case>
  
  <test-case name="numberformat130" covers="fn-format-number">
    <description>
      PURPOSE: test format-number() with pattern in which integer part of mantissa begins with an optional-digit-sign
    </description>
    <created by="Debbie Lockett" on="2015-04-22"/>
    <dependency type="spec" value="XP31+ XQ31+"/>
    <test>
      fn:format-number(12345.678, '#99.99e99')
    </test>
    <result>
      <assert-string-value>12.35e03</assert-string-value>
    </result>
  </test-case>
  
  <test-case name="numberformat131" covers="fn-format-number">
    <description>
      PURPOSE: test format-number() with pattern in which integer part of mantissa is one optional-digit-sign
    </description>
    <created by="Debbie Lockett" on="2015-04-22"/>
    <modified by="Debbie Lockett" on="2015-10-01" change="Bug fix related to bug #28845: Change result"/>
    <dependency type="spec" value="XP31+ XQ31+"/>
    <test>
      fn:format-number(12345.678, '#.99e99')
    </test>
    <result>
      <assert-string-value>0.12e05</assert-string-value>
    </result>
  </test-case>
  
  <test-case name="numberformat132" covers="fn-format-number">
    <description>
      PURPOSE: test format-number() with pattern in which min integer part size, 
      and min fractional part size of mantissa are both zero
    </description>
    <created by="Debbie Lockett" on="2015-04-22"/>
    <modified by="Debbie Lockett" on="2015-10-01" change="Bug fix related to bug #28845: Change result"/>
    <dependency type="spec" value="XP31+ XQ31+"/>
    <test>
      fn:format-number(0045.234, '#.#e99')
    </test>
    <result>
      <assert-string-value>0.5e02</assert-string-value>
    </result>
  </test-case>
  
  <test-case name="numberformat133" covers="fn-format-number">
    <description>
      PURPOSE: test format-number() with pattern in which min integer part size is zero, with nonempty exponent part
    </description>
    <created by="Debbie Lockett" on="2015-04-22"/>
    <dependency type="spec" value="XP31+ XQ31+"/>
    <test>
      fn:format-number(0.2, '.#e9')
    </test>
    <result>
      <assert-string-value>.2e0</assert-string-value>
    </result>
  </test-case>
  
  <test-case name="numberformat134" covers="fn-format-number">
    <description>
      PURPOSE: test format-number() with pattern in which min integer part size is zero, with nonempty exponent part
    </description>
    <created by="Debbie Lockett" on="2015-04-22"/>
    <dependency type="spec" value="XP31+ XQ31+"/>
    <test>
      fn:format-number(0.2, '.999e9')
    </test>
    <result>
      <assert-string-value>.200e0</assert-string-value>
    </result>
  </test-case>
  
  <test-case name="numberformat135" covers="fn-format-number">
    <description>
      PURPOSE: test format-number() with pattern in which fractional part has size zero, with nonempty exponent part
    </description>
    <created by="Debbie Lockett" on="2015-04-22"/>
    <modified by="Debbie Lockett" on="2015-10-01" change="Bug fix related to bug #28845: Change result"/>
    <dependency type="spec" value="XP31+ XQ31+"/>
    <test>
      fn:format-number(0.2, '#.e9')
    </test>
    <result>
      <assert-string-value>0.2e0</assert-string-value>
    </result>
  </test-case>
  
  <test-case name="numberformat136" covers="fn-format-number">
    <description>
      PURPOSE: test format-number() with pattern in which fractional part has size zero, with nonempty exponent part
    </description>
    <created by="Debbie Lockett" on="2015-04-22"/>
    <dependency type="spec" value="XP31+ XQ31+"/>
    <test>
      fn:format-number(0.2, '9e9')
    </test>
    <result>
      <assert-string-value>2e-1</assert-string-value>
    </result>
  </test-case>
  
  <test-case name="numberformat137" covers="fn-format-number">
    <description>
      PURPOSE: test format-number() with pattern in which fractional part has size zero, with nonempty exponent part
    </description>
    <created by="Debbie Lockett" on="2015-04-22"/>
    <dependency type="spec" value="XP31+ XQ31+"/>
    <test>
      fn:format-number(12345.678, '999.e99')
    </test>
    <result>
      <assert-string-value>123e02</assert-string-value>
    </result>
  </test-case>
  
  <test-case name="numberformat138" covers="fn-format-number">
    <description>
      PURPOSE: test format-number() with pattern in which fractional part has size zero, with nonempty exponent part
    </description>
    <created by="Debbie Lockett" on="2015-04-22"/>
    <dependency type="spec" value="XP31+ XQ31+"/>
    <test>
      fn:format-number(12345.678, '999e9')
    </test>
    <result>
      <assert-string-value>123e2</assert-string-value>
    </result>
  </test-case>
  
  <test-case name="numberformat139" covers="fn-format-number">
    <description>
      PURPOSE: test format-number() with pattern in which mantissa part contains no 
      optional-digit-sign nor member of the decimal-digit-family.
    </description>
    <created by="Debbie Lockett" on="2015-04-22"/>
    <dependency type="spec" value="XP31+ XQ31+"/>
    <test>
      fn:format-number(12345.678, '.e99')
    </test>
    <result>
      <error code="FODF1310"/>
    </result>
  </test-case>  
  
  <test-case name="numberformat140" covers="fn-format-number">
    <description>
      PURPOSE: test format-number() - negative number into scientific format
    </description>
    <created by="Debbie Lockett" on="2015-04-22"/>
    <dependency type="spec" value="XP31+ XQ31+"/>
    <test>
      fn:format-number(-12345.678, '999.99e99')
    </test>
    <result>
      <assert-string-value>-123.46e02</assert-string-value>
    </result>
  </test-case>
  
  <test-case name="numberformat141" covers="fn-format-number">
    <description>
      PURPOSE: test format-number() - exponent of result is negative
    </description>
    <created by="Debbie Lockett" on="2015-04-22"/>
    <dependency type="spec" value="XP31+ XQ31+"/>
    <test>
      fn:format-number(0.00012345678, '9.99e99')
    </test>
    <result>
      <assert-string-value>1.23e-04</assert-string-value>
    </result>
  </test-case>
  
  <test-case name="numberformat142" covers="fn-format-number">
    <description>
      PURPOSE: test format-number() - negative number, and exponent of result is negative
    </description>
    <created by="Debbie Lockett" on="2015-04-22"/>
    <dependency type="spec" value="XP31+ XQ31+"/>
    <test>
      fn:format-number(-0.00012345678, '9.99e99')
    </test>
    <result>
      <assert-string-value>-1.23e-04</assert-string-value>
    </result>
  </test-case>  
    
  <test-case name="numberformat143" covers="fn-format-number">
    <description>
      PURPOSE: test format-number() with pattern in which 2nd exponent-separator is treated as passive character
    </description>
    <created by="Debbie Lockett" on="2015-04-22"/>
    <dependency type="spec" value="XP31+ XQ31+"/>
    <test>
      fn:format-number(12345.678, '9.9999e99end')
    </test>
    <result>
      <assert-string-value>1.2346e04end</assert-string-value>
    </result>
  </test-case>
  
  <test-case name="numberformat144" covers="fn-format-number">
    <description>
      PURPOSE: test format-number() with pattern in which 2nd exponent-separator is treated as passive character
    </description>
    <created by="Debbie Lockett" on="2015-04-22"/>
    <dependency type="spec" value="XP31+ XQ31+"/>
    <test>
      fn:format-number(12345.678, '9.9999e99e')
    </test>
    <result>
      <assert-string-value>1.2346e04e</assert-string-value>
    </result>
  </test-case>
  
  <test-case name="numberformat145" covers="fn-format-number">
    <description>
      PURPOSE: test format-number() with pattern with exponent-separator and suffix
    </description>
    <created by="Debbie Lockett" on="2015-04-22"/>
    <dependency type="spec" value="XP31+ XQ31+"/>
    <test>
      fn:format-number(12345.678, '9.9999e99dog')
    </test>
    <result>
      <assert-string-value>1.2346e04dog</assert-string-value>
    </result>
  </test-case>
  
  <test-case name="numberformat146" covers="fn-format-number">
    <description>
      PURPOSE: test format-number() with pattern with exponent-separator, prefix and suffix containing exponent-separator
    </description>
    <created by="Debbie Lockett" on="2015-04-22"/>
    <dependency type="spec" value="XP31+ XQ31+"/>
    <test>
      fn:format-number(12345.678, 'end9.9999e99end')
    </test>
    <result>
      <assert-string-value>end1.2346e04end</assert-string-value>
    </result>
  </test-case>
    
  <test-case name="numberformat150">
    <description>
      PURPOSE: test format-number() - grouping-separator should not be adjacent to decimal separator
    </description>
    <created by="Debbie Lockett" on="2015-04-22"/>
    <test>
      fn:format-number(12345.678, '#,.##')
    </test>
    <result>
      <error code="FODF1310"/>
    </result>
  </test-case>
  
  <test-case name="numberformat151">
    <description>
      PURPOSE: test format-number() - grouping-separator should not be adjacent to decimal separator
    </description>
    <created by="Debbie Lockett" on="2015-04-22"/>
    <test>
      fn:format-number(12345.678, '#.,##')
    </test>
    <result>
      <error code="FODF1310"/>
    </result>
  </test-case>
  
  <test-case name="numberformat152">
    <description>
      PURPOSE: test format-number() with pattern with grouping-separator at end of integer part.
      See bug 28567.
    </description>
    <created by="Debbie Lockett" on="2015-04-22"/>
    <test>
      fn:format-number(12345.678, '#,')
    </test>
    <result>
      <error code="FODF1310"/>
    </result>
  </test-case>
  
  <test-case name="numberformat153">
    <description>
      PURPOSE: test format-number() with pattern with adjacent grouping-separators.
    </description>
    <created by="Debbie Lockett" on="2015-04-22"/>
    <modified by="Debbie Lockett" on="2015-07-30" change="Expected result to an error following resolution of bug 28567"/>
    <test>
      fn:format-number(12345.678, '#,,###')
    </test>
    <result>
      <error code="FODF1310"/>
    </result>
  </test-case>
  
  <test-case name="numberformat154">
    <description>
      PURPOSE: test format-number() setting zero-digit
    </description>
    <created by="Debbie Lockett" on="2015-04-22"/>
    <dependency type="spec" value="XQ30+"/>
    <test>
      declare default decimal-format zero-digit = "&#x660;";
      format-number(1, '&#x660;')
    </test>
    <result>
      <assert-string-value>&#x661;</assert-string-value>
    </result>
  </test-case>
  
  <test-case name="numberformat155">
    <description>
      PURPOSE: test format-number() setting zero-digit
    </description>
    <created by="Debbie Lockett" on="2015-04-22"/>
    <dependency type="spec" value="XQ30+"/>
    <test>
      declare default decimal-format zero-digit = "&#1632;";
      format-number(1, '&#1632;')
    </test>
    <result>
      <assert-string-value>&#1633;</assert-string-value>
    </result>
  </test-case>
  
  <test-case name="numberformat156">
    <description>
      PURPOSE: test format-number() with pattern with adjacent grouping-separators in fractional part.
    </description>
    <created by="Debbie Lockett" on="2015-07-30"/>
    <test>
      fn:format-number(12345.678, '#.#,,#')
    </test>
    <result>
      <error code="FODF1310"/>
    </result>
  </test-case>
  
  <test-case name="numberformat157">
    <description>
      PURPOSE: test format-number() with pattern with grouping-separators in fractional part.
    </description>
    <created by="Debbie Lockett" on="2015-07-30"/>
    <test>
      fn:format-number(12345.6789012345, '#.#,##,#')
    </test>
    <result>
      <assert-string-value>12345.6,78,9</assert-string-value>
    </result>
  </test-case>
  
  <test-case name="numberformat158">
    <description>
      PURPOSE: test format-number() with pattern with grouping-separators in fractional part.
    </description>
    <created by="Debbie Lockett" on="2015-07-30"/>
    <test>
      fn:format-number(12345.6789012345, '#.##,##,##')
    </test>
    <result>
      <assert-string-value>12345.67,89,01</assert-string-value>
    </result>
  </test-case>   
  
  <test-case name="numberformat201">
    <description>
      format-number() with pattern in which min integer part size is zero, frac part empty, input number between 0 and 1
    </description>
    <created by="Debbie Lockett" on="2015-08-04"/>
    <test>
      fn:format-number(0.2, '#')
    </test>
    <result>
      <assert-string-value>0</assert-string-value>
    </result>
  </test-case>
  
  <test-case name="numberformat202">
    <description>
      format-number() with pattern in which min integer part size is zero, frac part empty
    </description>
    <created by="Debbie Lockett" on="2015-08-04"/>
    <test>
      fn:format-number(1.2, '#')
    </test>
    <result>
      <assert-string-value>1</assert-string-value>
    </result>
  </test-case>
  
  <test-case name="numberformat203">
    <description>
      format-number() with pattern in which min integer part size is one, frac part empty, input number between 0 and 1
    </description>
    <created by="Debbie Lockett" on="2015-08-04"/>
    <test>
      fn:format-number(0.2, '0')
    </test>
    <result>
      <assert-string-value>0</assert-string-value>
    </result>
  </test-case>
  
  <test-case name="numberformat204">
    <description>
      format-number() with pattern in which min integer part size is one, frac part empty
    </description>
    <created by="Debbie Lockett" on="2015-08-04"/>
    <test>
      fn:format-number(1.2, '0')
    </test>
    <result>
      <assert-string-value>1</assert-string-value>
    </result>
  </test-case>
  
  <test-case name="numberformat205">
    <description>
      test format-number() with pattern in which min integer part size is zero, frac part not empty, input number between 0 and 1
    </description>
    <created by="Debbie Lockett" on="2015-08-04"/>
    <test>
      fn:format-number(0.2, '.#')
    </test>
    <result>
      <assert-string-value>.2</assert-string-value>
    </result>
  </test-case>
  
  <test-case name="numberformat206">
    <description>
      format-number() with pattern in which min integer part size is zero, frac part not empty
    </description>
    <created by="Debbie Lockett" on="2015-08-04"/>
    <test>
      fn:format-number(1.2, '.#')
    </test>
    <result>
      <assert-string-value>1.2</assert-string-value>
    </result>
  </test-case>
  
  <test-case name="numberformat207">
    <description>
      test format-number() with pattern in which min integer part size is zero, frac part not empty, 
      input number between 0 and 1
    </description>
    <created by="Debbie Lockett" on="2015-08-04"/>
    <test>
      fn:format-number(0.2, '.0')
    </test>
    <result>
      <assert-string-value>.2</assert-string-value>
    </result>
  </test-case>
  
  <test-case name="numberformat208">
    <description>
      test format-number() with pattern in which min integer part size is zero, frac part not empty
    </description>
    <created by="Debbie Lockett" on="2015-08-04"/>
    <test>
      fn:format-number(1.2, '.0')
    </test>
    <result>
      <assert-string-value>1.2</assert-string-value>
    </result>
  </test-case>
  
  <test-case name="numberformat209">
    <description>
      test format-number() with pattern in which min integer part size is zero, frac part not empty, 
      input number between 0 and 1
    </description>
    <created by="Debbie Lockett" on="2015-08-04"/>
    <test>
      fn:format-number(0.2, '#.#')
    </test>
    <result>
      <assert-string-value>.2</assert-string-value>
    </result>
  </test-case>
  
  <test-case name="numberformat210">
    <description>
      format-number() with pattern in which min integer part size is zero, frac part not empty
    </description>
    <created by="Debbie Lockett" on="2015-08-04"/>
    <test>
      fn:format-number(1.2, '#.#')
    </test>
    <result>
      <assert-string-value>1.2</assert-string-value>
    </result>
  </test-case>
  
  <test-case name="numberformat211">
    <description>
      test format-number() with pattern in which min integer part size is one, frac part not empty, 
      input number between 0 and 1
    </description>
    <created by="Debbie Lockett" on="2015-08-04"/>
    <test>
      fn:format-number(0.2, '0.0')
    </test>
    <result>
      <assert-string-value>0.2</assert-string-value>
    </result>
  </test-case>
  
  <test-case name="numberformat212">
    <description>
      test format-number() with pattern in which min integer part size is one, frac part not empty
    </description>
    <created by="Debbie Lockett" on="2015-08-04"/>
    <test>
      fn:format-number(1.2, '0.0')
    </test>
    <result>
      <assert-string-value>1.2</assert-string-value>
    </result>
  </test-case>
  
  <test-case name="numberformat213">
    <description>
      format-number() with pattern in which min integer part size is one, frac part not empty, 
      input number between 0 and 1
    </description>
    <created by="Debbie Lockett" on="2015-08-04"/>
    <test>
      fn:format-number(0.2, '0.#')
    </test>
    <result>
      <assert-string-value>0.2</assert-string-value>
    </result>
  </test-case>
  
  <test-case name="numberformat214">
    <description>
      format-number() with pattern in which min integer part size is one, frac part not empty
    </description>
    <created by="Debbie Lockett" on="2015-08-04"/>
    <test>
      fn:format-number(1.2, '0.#')
    </test>
    <result>
      <assert-string-value>1.2</assert-string-value>
    </result>
  </test-case>
  
  <test-case name="numberformat215">
    <description>
      format-number() with pattern in which min integer part size is zero, frac part not empty, 
      input number between 0 and 1
    </description>
    <created by="Debbie Lockett" on="2015-08-04"/>
    <test>
      fn:format-number(0.2, '#.0')
    </test>
    <result>
      <assert-string-value>.2</assert-string-value>
    </result>
  </test-case>
  
  <test-case name="numberformat216">
    <description>
      test format-number() with pattern in which min integer part size is zero, frac part not empty
    </description>
    <created by="Debbie Lockett" on="2015-08-04"/>
    <test>
      fn:format-number(1.2, '#.0')
    </test>
    <result>
      <assert-string-value>1.2</assert-string-value>
    </result>
  </test-case>
  
  <test-case name="numberformat217">
    <description>
      format-number() with pattern in which integer part contains no decimal-digit-family-characters, 
      frac part empty, input number between 0 and 1
    </description>
    <created by="Debbie Lockett" on="2015-08-04"/>
    <test>
      fn:format-number(0.2, '#.')
    </test>
    <result>
      <assert-string-value>0</assert-string-value>
    </result>
  </test-case>
  
  <test-case name="numberformat218">
    <description>
      test format-number() with pattern in which min integer part size is zero, frac part empty
    </description>
    <created by="Debbie Lockett" on="2015-08-04"/>
    <test>
      fn:format-number(1.2, '#.')
    </test>
    <result>
      <assert-string-value>1</assert-string-value>
    </result>
  </test-case>
  
  <test-case name="numberformat219">
    <description>
      test format-number() with pattern in which min integer part size is one, frac part empty, 
      input number between 0 and 1
    </description>
    <created by="Debbie Lockett" on="2015-08-04"/>
    <test>
      fn:format-number(0.2, '0.')
    </test>
    <result>
      <assert-string-value>0</assert-string-value>
    </result>
  </test-case>
  
  <test-case name="numberformat220">
    <description>
      format-number() with pattern in which min integer part size is one, frac part empty
    </description>
    <created by="Debbie Lockett" on="2015-08-04"/>
    <test>
      fn:format-number(1.2, '0.')
    </test>
    <result>
      <assert-string-value>1</assert-string-value>
    </result>
  </test-case>
  
  <test-case name="numberformat221">
    <description>
      test format-number() with pattern in which min integer part size is zero 
      (but integer part contains inactive characters), frac part not empty, input number between 0 and 1
    </description>
    <created by="Debbie Lockett" on="2015-08-04"/>
    <test>
      fn:format-number(0.2, 'this.#')
    </test>
    <result>
      <assert-string-value>this.2</assert-string-value>
    </result>
  </test-case>
  
  <test-case name="numberformat222">
    <description>
      format-number() with pattern in which min integer part size is zero 
      (but integer part contains inactive characters), frac part not empty
    </description>
    <created by="Debbie Lockett" on="2015-08-04"/>
    <test>
      fn:format-number(1.2, 'this.#')
    </test>
    <result>
      <assert-string-value>this1.2</assert-string-value>
    </result>
  </test-case>
  
  <test-case name="numberformat223">
    <description>
      test format-number() with pattern in which min integer part size is zero 
      (but integer part contains inactive characters), frac part not empty, input number between 0 and 1
    </description>
    <created by="Debbie Lockett" on="2015-08-04"/>
    <test>
      fn:format-number(0.2, 'this.0')
    </test>
    <result>
      <assert-string-value>this.2</assert-string-value>
    </result>
  </test-case>
  
  <test-case name="numberformat224">
    <description>
      test format-number() with pattern in which min integer part size is zero 
      (but integer part contains inactive characters), frac part not empty
    </description>
    <created by="Debbie Lockett" on="2015-08-04"/>
    <test>
      fn:format-number(1.2, 'this.0')
    </test>
    <result>
      <assert-string-value>this1.2</assert-string-value>
    </result>
  </test-case>
  
  <test-case name="numberformat225">
    <description>
      test format-number() with pattern in which min integer part size is zero, 
      frac part only contains inactive characters, input number between 0 and 1
    </description>
    <created by="Debbie Lockett" on="2015-08-04"/>
    <test>
      fn:format-number(0.2, '#.suffix')
    </test>
    <result>
      <assert-string-value>0suffix</assert-string-value>
    </result>
  </test-case>
  
  <test-case name="numberformat226">
    <description>
      test format-number() with pattern in which min integer part size is zero, 
      frac part only contains inactive characters
    </description>
    <created by="Debbie Lockett" on="2015-08-04"/>
    <test>
      fn:format-number(1.2, '#.suffix')
    </test>
    <result>
      <assert-string-value>1suffix</assert-string-value>
    </result>
  </test-case>
  
  <test-case name="numberformat227">
    <description>
      test format-number() with pattern in which min integer part size is three, 
      frac part not empty
    </description>
    <created by="Debbie Lockett" on="2015-08-04"/>
    <test>
      fn:format-number(0.2, '000.0')
    </test>
    <result>
      <assert-string-value>000.2</assert-string-value>
    </result>
  </test-case>
  
  <test-case name="numberformat228">
    <description>
      format-number() with pattern in which min integer part size is zero, frac part not empty,
      input number zero (see bug #29164)
    </description>
    <created by="Debbie Lockett" on="2015-10-07"/>
    <test>
      fn:format-number(0, '#.#')
    </test>
    <result>
      <assert-string-value>.0</assert-string-value>
    </result>
  </test-case>
  
  <test-case name="numberformat229">
    <description>
      format-number() with pattern in which min integer part size is zero, frac part not empty,
      input number zero (see bug #29164)
    </description>
    <created by="Debbie Lockett" on="2015-10-07"/>
    <test>
      fn:format-number(0, '.#')
    </test>
    <result>
      <assert-string-value>.0</assert-string-value>
    </result>
  </test-case>
  
  <test-case name="numberformat230">
    <description>
      format-number() with pattern in which min integer part size is zero, frac part not empty,
      input number zero (see bug #29164)
    </description>
    <created by="Debbie Lockett" on="2015-10-07"/>
    <test>
      fn:format-number(xs:integer(0), '###.###')
    </test>
    <result>
      <assert-string-value>.0</assert-string-value>
    </result>
  </test-case>
  
  <test-case name="numberformat231" covers="fn-format-number">
    <description>
      format-number() with pattern in which min integer part size is zero, 
      frac part empty, input number between 0 and 1, exponent part not empty
    </description>
    <created by="Debbie Lockett" on="2015-08-04"/>
    <modified by="Debbie Lockett" on="2015-10-01" change="Bug fix related to bug #28845: Change result"/>
    <dependency type="spec" value="XP31+ XQ31+"/>
    <test>
      fn:format-number(0.2, '#e0')
    </test>
    <result>
      <assert-string-value>0.2e0</assert-string-value>
    </result>
  </test-case>
  
  <test-case name="numberformat232" covers="fn-format-number">
    <description>
      format-number() with pattern in which min integer part size is zero, 
      frac part empty, exponent part not empty
    </description>
    <created by="Debbie Lockett" on="2015-08-04"/>
    <modified by="Debbie Lockett" on="2015-10-01" change="Bug fix related to bug #28845: Change result"/>
    <dependency type="spec" value="XP31+ XQ31+"/>
    <test>
      fn:format-number(1.2, '#e0')
    </test>
    <result>
      <assert-string-value>0.1e1</assert-string-value>
    </result>
  </test-case>
  
  <test-case name="numberformat233" covers="fn-format-number">
    <description>
      format-number() with pattern in which min integer part size is one, 
      frac part empty, input number between 0 and 1, exponent part not empty
    </description>
    <created by="Debbie Lockett" on="2015-08-04"/>
    <dependency type="spec" value="XP31+ XQ31+"/>
    <test>
      fn:format-number(0.2, '0e0')
    </test>
    <result>
      <assert-string-value>2e-1</assert-string-value>
    </result>
  </test-case>
  
  <test-case name="numberformat234" covers="fn-format-number">
    <description>
      format-number() with pattern in which min integer part size is one, 
      frac part empty, exponent part not empty
    </description>
    <created by="Debbie Lockett" on="2015-08-04"/>
    <dependency type="spec" value="XP31+ XQ31+"/>
    <test>
      fn:format-number(1.2, '0e0')
    </test>
    <result>
      <assert-string-value>1e0</assert-string-value>
    </result>
  </test-case>
  
  <test-case name="numberformat235" covers="fn-format-number">
    <description>
      test format-number() with pattern in which min integer part size is zero, 
      frac part not empty, input number between 0 and 1, exponent part not empty
    </description>
    <created by="Debbie Lockett" on="2015-08-04"/>
    <dependency type="spec" value="XP31+ XQ31+"/>
    <test>
      fn:format-number(0.2, '.#e0')
    </test>
    <result>
      <assert-string-value>.2e0</assert-string-value>
    </result>
  </test-case>
  
  <test-case name="numberformat236" covers="fn-format-number">
    <description>
      format-number() with pattern in which min integer part size is zero, 
      frac part not empty, exponent part not empty
    </description>
    <created by="Debbie Lockett" on="2015-08-04"/>
    <dependency type="spec" value="XP31+ XQ31+"/>
    <test>
      fn:format-number(1.2, '.#e0')
    </test>
    <result>
      <assert-string-value>.1e1</assert-string-value>
    </result>
  </test-case>
  
  <test-case name="numberformat237" covers="fn-format-number">
    <description>
      test format-number() with pattern in which min integer part size is zero, 
      frac part not empty, input number between 0 and 1, exponent part not empty
    </description>
    <created by="Debbie Lockett" on="2015-08-04"/>
    <dependency type="spec" value="XP31+ XQ31+"/>
    <test>
      fn:format-number(0.2, '.0e0')
    </test>
    <result>
      <assert-string-value>.2e0</assert-string-value>
    </result>
  </test-case>
  
  <test-case name="numberformat238" covers="fn-format-number">
    <description>
      test format-number() with pattern in which min integer part size is zero, 
      frac part not empty, exponent part not empty
    </description>
    <created by="Debbie Lockett" on="2015-08-04"/>
    <dependency type="spec" value="XP31+ XQ31+"/>
    <test>
      fn:format-number(1.2, '.0e0')
    </test>
    <result>
      <assert-string-value>.1e1</assert-string-value>
    </result>
  </test-case>
  
  <test-case name="numberformat239" covers="fn-format-number">
    <description>
      test format-number() with pattern in which min integer part size is zero, 
      frac part not empty, input number between 0 and 1, exponent part not empty
    </description>
    <created by="Debbie Lockett" on="2015-08-04"/>
    <modified by="Debbie Lockett" on="2015-10-01" change="Bug fix related to bug #28845: Change result"/>
    <dependency type="spec" value="XP31+ XQ31+"/>
    <test>
      fn:format-number(0.2, '#.#e0')
    </test>
    <result>
      <assert-string-value>0.2e0</assert-string-value>
    </result>
  </test-case>
  
  <test-case name="numberformat240" covers="fn-format-number">
    <description>
      format-number() with pattern in which min integer part size is zero, 
      frac part not empty, exponent part not empty
    </description>
    <created by="Debbie Lockett" on="2015-08-04"/>
    <modified by="Debbie Lockett" on="2015-10-01" change="Bug fix related to bug #28845: Change result"/>
    <dependency type="spec" value="XP31+ XQ31+"/>
    <test>
      fn:format-number(1.2, '#.#e0')
    </test>
    <result>
      <assert-string-value>0.1e1</assert-string-value>
    </result>
  </test-case>
  
  <test-case name="numberformat241" covers="fn-format-number">
    <description>
      test format-number() with pattern in which min integer part size is one, 
      frac part not empty, input number between 0 and 1, exponent part not empty
    </description>
    <created by="Debbie Lockett" on="2015-08-04"/>
    <dependency type="spec" value="XP31+ XQ31+"/>
    <test>
      fn:format-number(0.2, '0.0e0')
    </test>
    <result>
      <assert-string-value>2.0e-1</assert-string-value>
    </result>
  </test-case>
  
  <test-case name="numberformat242" covers="fn-format-number">
    <description>
      test format-number() with pattern in which min integer part size is one, 
      frac part not empty, exponent part not empty
    </description>
    <created by="Debbie Lockett" on="2015-08-04"/>
    <dependency type="spec" value="XP31+ XQ31+"/>
    <test>
      fn:format-number(1.2, '0.0e0')
    </test>
    <result>
      <assert-string-value>1.2e0</assert-string-value>
    </result>
  </test-case>
  
  <test-case name="numberformat243" covers="fn-format-number">
    <description>
      format-number() with pattern in which min integer part size is one, 
      frac part not empty, input number between 0 and 1, exponent part not empty
    </description>
    <created by="Debbie Lockett" on="2015-08-04"/>
    <dependency type="spec" value="XP31+ XQ31+"/>
    <test>
      fn:format-number(0.2, '0.#e0')
    </test>
    <result>
      <assert-string-value>2e-1</assert-string-value>
    </result>
  </test-case>
  
  <test-case name="numberformat244" covers="fn-format-number">
    <description>
      format-number() with pattern in which min integer part size is one, 
      frac part not empty, exponent part not empty
    </description>
    <created by="Debbie Lockett" on="2015-08-04"/>
    <dependency type="spec" value="XP31+ XQ31+"/>
    <test>
      fn:format-number(1.2, '0.#e0')
    </test>
    <result>
      <assert-string-value>1.2e0</assert-string-value>
    </result>
  </test-case>
  
  <test-case name="numberformat245" covers="fn-format-number">
    <description>
      format-number() with pattern in which min integer part size is zero, 
      frac part not empty, input number between 0 and 1, exponent part not empty
    </description>
    <created by="Debbie Lockett" on="2015-08-04"/>
    <modified by="Debbie Lockett" on="2015-10-01" change="Bug fix related to bug #28845: Change result"/>
    <dependency type="spec" value="XP31+ XQ31+"/>
    <test>
      fn:format-number(0.2, '#.0e0')
    </test>
    <result>
      <assert-string-value>0.2e0</assert-string-value>
    </result>
  </test-case>
  
  <test-case name="numberformat246" covers="fn-format-number">
    <description>
      test format-number() with pattern in which min integer part size is zero, 
      frac part not empty, exponent part not empty
    </description>
    <created by="Debbie Lockett" on="2015-08-04"/>
    <modified by="Debbie Lockett" on="2015-10-01" change="Bug fix related to bug #28845: Change result"/>
    <dependency type="spec" value="XP31+ XQ31+"/>
    <test>
      fn:format-number(1.2, '#.0e0')
    </test>
    <result>
      <assert-string-value>0.1e1</assert-string-value>
    </result>
  </test-case>
  
  <test-case name="numberformat247" covers="fn-format-number">
    <description>
      format-number() with pattern in which integer part contains no decimal-digit-family-characters, 
      frac part empty, input number between 0 and 1, exponent part not empty
    </description>
    <created by="Debbie Lockett" on="2015-08-04"/>
    <modified by="Debbie Lockett" on="2015-10-01" change="Bug fix related to bug #28845: Change result"/>
    <dependency type="spec" value="XP31+ XQ31+"/>
    <test>
      fn:format-number(0.2, '#.e0')
    </test>
    <result>
      <assert-string-value>0.2e0</assert-string-value>
    </result>
  </test-case>
  
  <test-case name="numberformat248" covers="fn-format-number">
    <description>
      test format-number() with pattern in which min integer part size is zero, 
      frac part empty, exponent part not empty
    </description>
    <created by="Debbie Lockett" on="2015-08-04"/>
    <modified by="Debbie Lockett" on="2015-10-01" change="Bug fix related to bug #28845: Change result"/>
    <dependency type="spec" value="XP31+ XQ31+"/>
    <test>
      fn:format-number(1.2, '#.e0')
    </test>
    <result>
      <assert-string-value>0.1e1</assert-string-value>
    </result>
  </test-case>
  
  <test-case name="numberformat249" covers="fn-format-number">
    <description>
      test format-number() with pattern in which min integer part size is one, 
      frac part empty, input number between 0 and 1, exponent part not empty
    </description>
    <created by="Debbie Lockett" on="2015-08-04"/>
    <dependency type="spec" value="XP31+ XQ31+"/>
    <test>
      fn:format-number(0.2, '0.e0')
    </test>
    <result>
      <assert-string-value>2e-1</assert-string-value>
    </result>
  </test-case>
  
  <test-case name="numberformat250" covers="fn-format-number">
    <description>
      format-number() with pattern in which min integer part size is one, 
      frac part empty, exponent part not empty
    </description>
    <created by="Debbie Lockett" on="2015-08-04"/>
    <dependency type="spec" value="XP31+ XQ31+"/>
    <test>
      fn:format-number(1.2, '0.e0')
    </test>
    <result>
      <assert-string-value>1e0</assert-string-value>
    </result>
  </test-case>
  
  <test-case name="numberformat251" covers="fn-format-number">
    <description>
      test format-number() with pattern in which min integer part size is zero 
      (but integer part contains inactive characters), frac part not empty, input number between 0 and 1,
      exponent part not empty
    </description>
    <created by="Debbie Lockett" on="2015-08-04"/>
    <dependency type="spec" value="XP31+ XQ31+"/>
    <test>
      fn:format-number(0.2, 'this.#e0')
    </test>
    <result>
      <assert-string-value>this.2e0</assert-string-value>
    </result>
  </test-case>
  
  <test-case name="numberformat252" covers="fn-format-number">
    <description>
      format-number() with pattern in which min integer part size is zero 
      (but integer part contains inactive characters), frac part not empty, exponent part not empty
    </description>
    <created by="Debbie Lockett" on="2015-08-04"/>
    <dependency type="spec" value="XP31+ XQ31+"/>
    <test>
      fn:format-number(1.2, 'this.#e0')
    </test>
    <result>
      <assert-string-value>this.1e1</assert-string-value>
    </result>
  </test-case>
  
  <test-case name="numberformat253" covers="fn-format-number">
    <description>
      test format-number() with pattern in which min integer part size is zero 
      (but integer part contains inactive characters), frac part not empty, 
      input number between 0 and 1, exponent part not empty
    </description>
    <created by="Debbie Lockett" on="2015-08-04"/>
    <dependency type="spec" value="XP31+ XQ31+"/>
    <test>
      fn:format-number(0.2, 'this.0e0')
    </test>
    <result>
      <assert-string-value>this.2e0</assert-string-value>
    </result>
  </test-case>
  
  <test-case name="numberformat254" covers="fn-format-number">
    <description>
      test format-number() with pattern in which min integer part size is zero 
      (but integer part contains inactive characters), frac part not empty, 
      exponent part not empty
    </description>
    <created by="Debbie Lockett" on="2015-08-04"/>
    <dependency type="spec" value="XP31+ XQ31+"/>
    <test>
      fn:format-number(1.2, 'this.0e0')
    </test>
    <result>
      <assert-string-value>this.1e1</assert-string-value>
    </result>
  </test-case>
  
  <test-case name="numberformat255" covers="fn-format-number">
    <description>
      test format-number() with pattern in which min integer part size is three, 
      frac part not empty, exponent part not empty
    </description>
    <created by="Debbie Lockett" on="2015-08-04"/>
    <dependency type="spec" value="XP31+ XQ31+"/>
    <test>
      fn:format-number(0.2, '000.0e0')
    </test>
    <result>
      <assert-string-value>200.0e-3</assert-string-value>
    </result>
  </test-case>
  
  <test-case name="numberformat261" covers="fn-format-number">
    <description>
      test format-number() with pattern in which min integer part size is zero, 
      for which there is a possible choice of mantissa and exponent.
    </description>
    <created by="Debbie Lockett" on="2015-08-04"/>
    <dependency type="spec" value="XP31+ XQ31+"/>
    <test>
      fn:format-number(0.002, '.0e0')
    </test>
    <result>
      <assert-string-value>.2e-2</assert-string-value>
    </result>
  </test-case>
  
  <test-case name="numberformat262" covers="fn-format-number">
    <description>
      test format-number() with pattern in which min integer part size is zero, 
      for which there is a possible choice of mantissa and exponent.
    </description>
    <created by="Debbie Lockett" on="2015-08-04"/>
    <dependency type="spec" value="XP31+ XQ31+"/>
    <test>
      fn:format-number(0.002, '.000e0')
    </test>
    <result>
      <assert-string-value>.200e-2</assert-string-value>
    </result>
  </test-case>
  
  <test-case name="numberformat263" covers="fn-format-number">
    <description>
      test format-number() with pattern in which min integer part size is zero, 
      for which there is a possible choice of mantissa and exponent.
    </description>
    <created by="Debbie Lockett" on="2015-08-04"/>
    <modified by="Debbie Lockett" on="2015-10-01" change="Bug fix related to bug #28845: Change result"/>
    <dependency type="spec" value="XP31+ XQ31+"/>
    <test>
      fn:format-number(0.002, '#.###e0')
    </test>
    <result>
      <assert-string-value>0.2e-2</assert-string-value>
    </result>
  </test-case>
  
  <test-case name="numberformat301" covers="fn-format-number">
    <description>
      exponential notation: unexpected number of digits in integer part after rounding?
    </description>
    <created by="Debbie Lockett" on="2015-08-04"/>
    <dependency type="spec" value="XP31+ XQ31+"/>
    <test>
      fn:format-number(0.99999999, '.#e0')
    </test>
    <result>
      <assert-string-value>1.0e0</assert-string-value>
    </result>
  </test-case>
  
  <test-case name="numberformat302" covers="fn-format-number">
    <description>
      exponential notation: unexpected number of digits in integer part after rounding?
    </description>
    <created by="Debbie Lockett" on="2015-08-04"/>
    <dependency type="spec" value="XP31+ XQ31+"/>
    <test>
      fn:format-number(0.99999999, '.0e0')
    </test>
    <result>
      <assert-string-value>1.0e0</assert-string-value>
    </result>
  </test-case>
  
  <test-case name="numberformat303" covers="fn-format-number">
    <description>
      exponential notation: unexpected number of digits in integer part after rounding?
    </description>
    <created by="Debbie Lockett" on="2015-08-04"/>
    <dependency type="spec" value="XP31+ XQ31+"/>
    <test>
      fn:format-number(0.99999999, '#.#e0')
    </test>
    <result>
      <assert-string-value>1e0</assert-string-value>
    </result>
  </test-case>
  
  <test-case name="numberformat304" covers="fn-format-number">
    <description>
      exponential notation: unexpected number of digits in integer part after rounding?
    </description>
    <created by="Debbie Lockett" on="2015-08-04"/>
    <dependency type="spec" value="XP31+ XQ31+"/>
    <test>
      fn:format-number(0.99999999, '0.0e0')
    </test>
    <result>
      <assert-string-value>10.0e-1</assert-string-value>
    </result>
  </test-case>
  
  <test-case name="numberformat310" covers="fn-format-number">
    <description>Single grouping separator in pattern: regular or not?</description>
    <created by="Michael Kay" on="2018-02-13"/>
    <dependency type="spec" value="XP31+ XQ31+"/>
    <test>
      format-number(642120, '####,##')
    </test>
    <result>
      <assert-string-value>6421,20</assert-string-value>
    </result>
  </test-case>
  
  <test-case name="numberformat311" covers="fn-format-number">
    <description>Single grouping separator in pattern: regular or not?</description>
    <created by="Michael Kay" on="2018-02-13"/>
    <dependency type="spec" value="XP31+ XQ31+"/>
    <test>
      format-number(642120, '###,##')
    </test>
    <result>
      <assert-string-value>6421,20</assert-string-value>
    </result>
  </test-case>
  
  <test-case name="numberformat312" covers="fn-format-number">
    <description>Single grouping separator in pattern: regular or not?</description>
    <created by="Michael Kay" on="2018-02-13"/>
    <dependency type="spec" value="XP31+ XQ31+"/>
    <test>
      format-number(642120, '##,##')
    </test>
    <result>
      <assert-string-value>64,21,20</assert-string-value>
    </result>
  </test-case>
  
  <test-case name="numberformat313" covers="fn-format-number">
    <description>Single grouping separator in pattern: regular or not?</description>
    <created by="Michael Kay" on="2018-02-13"/>
    <dependency type="spec" value="XP31+ XQ31+"/>
    <test>
      format-number(642120, '#,##')
    </test>
    <result>
      <assert-string-value>64,21,20</assert-string-value>
    </result>
  </test-case>
  
  <test-case name="numberformat314" covers="fn-format-number">
    <description>Single grouping separator in pattern: regular or not?</description>
    <created by="Michael Kay" on="2018-02-13"/>
    <dependency type="spec" value="XP31+ XQ31+"/>
    <test>
      format-number(642120, '0000,00')
    </test>
    <result>
      <assert-string-value>6421,20</assert-string-value>
    </result>
  </test-case>
  
  <test-case name="numberformat315" covers="fn-format-number">
    <description>Single grouping separator in pattern: regular or not?</description>
    <created by="Michael Kay" on="2018-02-13"/>
    <dependency type="spec" value="XP31+ XQ31+"/>
    <test>
      format-number(642120, '000,00')
    </test>
    <result>
      <assert-string-value>6421,20</assert-string-value>
    </result>
  </test-case>
  
  <test-case name="numberformat316" covers="fn-format-number">
    <description>Single grouping separator in pattern: regular or not?</description>
    <created by="Michael Kay" on="2018-02-13"/>
    <dependency type="spec" value="XP31+ XQ31+"/>
    <test>
      format-number(642120, '00,00')
    </test>
    <result>
      <assert-string-value>64,21,20</assert-string-value>
    </result>
  </test-case>
  
  <test-case name="numberformat317" covers="fn-format-number">
    <description>Single grouping separator in pattern: regular or not?</description>
    <created by="Michael Kay" on="2018-02-13"/>
    <dependency type="spec" value="XP31+ XQ31+"/>
    <test>
      format-number(642120, '0,00')
    </test>
    <result>
      <assert-string-value>64,21,20</assert-string-value>
    </result>
  </test-case>
  
  <test-case name="numberformat318" covers="fn-format-number">
    <description>Two grouping separators in pattern: regular or not?</description>
    <created by="Michael Kay" on="2018-02-13"/>
    <dependency type="spec" value="XP31+ XQ31+"/>
    <test>
      format-number(642120, '#,#,#')
    </test>
    <result>
      <assert-string-value>6,4,2,1,2,0</assert-string-value>
    </result>
  </test-case>
  
  <test-case name="numberformat319" covers="fn-format-number">
    <description>Two grouping separators in pattern: regular or not?</description>
    <created by="Michael Kay" on="2018-02-13"/>
    <dependency type="spec" value="XP31+ XQ31+"/>
    <test>
      format-number(642120, '##,#,#')
    </test>
    <result>
      <assert-string-value>6421,2,0</assert-string-value>
    </result>
  </test-case>
  
  
  
  

   <test-case name="numberformat901err">
      <description>
        Creator: David Marston 
        Purpose: Create a conflict in the use of the '!' character. 
      </description>
      <created by="Michael Kay, Saxonica" on="2010-12-13"/>
      <!--SOURCE: numberformat/numberformat901err.xml-->
      <dependency type="spec" value="XQ30+"/>
      <test>
        declare default decimal-format decimal-separator="!" grouping-separator="!";
        format-number(931.4857,'###!###!###')</test>
      <result>
         <error code="XQST0098"/>
      </result>
   </test-case>
   <test-case name="numberformat902err">
      <description>
        Creator: Michael Kay (bug report from doerschlein) 
        Purpose: Test use of an illegal picture. </description>
      <created by="Michael Kay, Saxonica" on="2010-12-13"/>
      <modified by="O'Neil Delpratt" on="2012-05-23" change="Bug fix related to bug #15626: Change to error code"/>
      <!--SOURCE: numberformat/numberformat902err.xml-->
      <environment/>
      <test>format-number(931.4857,'000.##0')</test>
      <result>
         <error code="FODF1310"/>
      </result>
   </test-case>
   <test-case name="numberformat905err">
      <description>
        Purpose: test error condition: no digit or zero-digit in picture. </description>
      <created by="Michael Kay, Saxonica" on="2010-12-13"/>
       <modified by="O'Neil Delpratt" on="2012-05-31" change="Bug fix related to bug #15626: Change to error code"/>
      <!--SOURCE: numberformat/stdxmlfile.xml-->
      <environment>
         <decimal-format name="q" decimal-separator="." grouping-separator=","/>
      </environment>
      <test>format-number(931.4857,'fred.ginger', 'q')</test>
      <result>
         <error code="FODF1310"/>
      </result>
   </test-case>

   <test-case name="numberformat906InputErr">
      <description>
        Creator: Zhen Hua Liu
        Purpose: Test wrong arg datatype inputs for format-number. </description>
      <created by="Zhen Hua Liu" on="2012-01-18"/>
      <environment/>
      <test>format-number('abc','000.##0')</test>
      <result>
         <error code="XPTY0004"/>
      </result>
   </test-case>

   <test-case name="numberformat907InputErr">
      <description>
        Creator: Zhen Hua Liu
        Purpose: Test wrong arg datatype inputs for format-number. </description>
      <created by="Zhen Hua Liu" on="2012-01-18"/>
      <environment/>
      <test>format-number(931.45, 931.45)</test>
      <result>
         <error code="XPTY0004"/>
      </result>
   </test-case>

  <test-case name="numberformatFODF1280">
      <description>
        Creator: Zhen Hua Liu
        Purpose: Test raising error FODF1280. </description>
      <created by="Zhen Hua Liu" on="2012-01-18"/>
      <environment/>
      <test>format-number(931.45, '000.##0', 'foo:bar')</test>
      <result>
         <error code="FODF1280"/>
      </result>
   </test-case>

  <test-case name="numberformatNaN">
      <description>
        Creator: Zhen Hua Liu
        Purpose: NaN input from number("abc"). </description>
      <created by="Zhen Hua Liu" on="2012-01-18"/>
      <environment/>
      <test>format-number(number("abc"),'#############')</test>
      <result>
         <assert-string-value>NaN</assert-string-value>
      </result>
   </test-case>

  <test-case name="cbcl-fn-format-number-001">
      <description>If the input number is NaN (not a number), the result is the specified NaN-symbol (with no prefix or suffix).</description>
      <created by="Tim Mills" on="2013-07-08"/>
      <environment/>
      <test>format-number(number("abc"),'PREFIX#SUFFIX')</test>
      <result>
         <assert-string-value>NaN</assert-string-value>
      </result>
   </test-case>

  <test-case name="cbcl-fn-format-number-002">
      <description>Negative zero is taken as negative, positive zero as positive..</description>
      <created by="Tim Mills" on="2013-07-08"/>
      <environment/>
      <test>format-number(0 div xs:double("INF"), '#')</test>
      <result>
         <assert-string-value>0</assert-string-value>
      </result>
   </test-case>

  <test-case name="cbcl-fn-format-number-003">
      <description>Negative zero is taken as negative, positive zero as positive..</description>
      <created by="Tim Mills" on="2013-07-08"/>
      <environment/>
      <test>format-number(0 div xs:double("-INF"), '#')</test>
      <result>
         <assert-string-value>-0</assert-string-value>
      </result>
   </test-case>

  <test-case name="cbcl-fn-format-number-004">
      <description>If the input number is positive or negative infinity, the result is the concatenation of the appropriate prefix, the infinity-symbol, and the appropriate suffix.</description>
      <created by="Tim Mills" on="2013-07-08"/>
      <environment>
         <decimal-format infinity="INF"/>
      </environment>
      <test>format-number(1 div 0e0,'PREFIX#SUFFIX')</test>
      <result>
         <assert-string-value>PREFIXINFSUFFIX</assert-string-value>
      </result>
   </test-case>

  <test-case name="cbcl-fn-format-number-005">
      <description>If the input number is positive or negative infinity, the result is the concatenation of the appropriate prefix, the infinity-symbol, and the appropriate suffix.   If the picture string contains only one sub-picture, the prefix for the negative sub-picture is set by concatenating the minus-sign character and the prefix for the positive sub-picture (if any), in that order.</description>
      <created by="Tim Mills" on="2013-07-08"/>
      <environment>
         <decimal-format infinity="INF"/>
      </environment>
      <test>format-number(-1 div 0e0,'PREFIX#SUFFIX')</test>
      <result>
         <assert-string-value>-PREFIXINFSUFFIX</assert-string-value>
      </result>
   </test-case>

  <test-case name="cbcl-fn-format-number-006">
      <description>If the input number is positive or negative infinity, the result is the concatenation of the appropriate prefix, the infinity-symbol, and the appropriate suffix.   If the picture string contains only one sub-picture, the prefix for the negative sub-picture is set by concatenating the minus-sign character and the prefix for the positive sub-picture (if any), in that order.</description>
      <created by="Tim Mills" on="2013-07-08"/>
      <environment>
         <decimal-format infinity="INF"/>
      </environment>
      <test>format-number(-1 div 0e0,'PREFIX#SUFFIX;prefix#suffix')</test>
      <result>
         <assert-string-value>prefixINFsuffix</assert-string-value>
      </result>
   </test-case>

  <test-case name="cbcl-fn-format-number-007">
      <description>If the input number is positive or negative infinity, the result is the concatenation of the appropriate prefix, the infinity-symbol, and the appropriate suffix.</description>
      <created by="Tim Mills" on="2013-07-08"/>
      <environment>
         <decimal-format infinity="INF"/>
      </environment>
      <test>format-number(-1 div 0e0,'PREFIX#SUFFIX;prefix#suffix')</test>
      <result>
         <assert-string-value>prefixINFsuffix</assert-string-value>
      </result>
   </test-case>

  <test-case name="cbcl-fn-format-number-008">
      <description>Check that the result doesn't start with a grouping separator.</description>
      <created by="Tim Mills" on="2013-07-08"/>
      <environment>
         <decimal-format infinity="INF"/>
      </environment>
      <test>format-number(1e2,'#,000')</test>
      <result>
         <assert-string-value>100</assert-string-value>
      </result>
   </test-case>

  <test-case name="cbcl-fn-format-number-009">
      <description>Check that the result doesn't start with a grouping separator.</description>
      <created by="Tim Mills" on="2013-07-08"/>
      <environment>
         <decimal-format infinity="INF"/>
      </environment>
      <test>format-number(100,'#,000')</test>
      <result>
         <assert-string-value>100</assert-string-value>
      </result>
   </test-case>

  <test-case name="cbcl-fn-format-number-010">
      <description>Check rounding in format-number.</description>
      <created by="Tim Mills" on="2013-07-08"/>
      <test>format-number(xs:double('0.9952832031249997'), '###,##0.00')</test>
      <result>
         <assert-string-value>1.00</assert-string-value>
      </result>
   </test-case>

  <test-case name="cbcl-fn-format-number-011">
      <description>Check grouping formating in format-number.</description>
      <created by="Tim Mills" on="2015-09-14"/>
      <test>format-number(xs:decimal('123456789'), '#,#')</test>
      <result>
         <assert-string-value>1,2,3,4,5,6,7,8,9</assert-string-value>
      </result>
   </test-case>

  <test-case name="cbcl-fn-format-number-012">
      <description>Check grouping formating in format-number.</description>
      <created by="Tim Mills" on="2015-09-14"/>
      <test>format-number(xs:decimal('123456789'), '#,##,00')</test>
      <result>
         <assert-string-value>1,23,45,67,89</assert-string-value>
      </result>
   </test-case>

  <test-case name="cbcl-fn-format-number-013">
      <description>Check grouping formating in format-number.</description>
      <created by="Tim Mills" on="2015-09-14"/>
      <test>format-number(xs:decimal('123456789'), '##,##,00')</test>
      <result>
         <assert-string-value>1,23,45,67,89</assert-string-value>
      </result>
   </test-case>

  <test-case name="cbcl-fn-format-number-014">
      <description>Check grouping formating in format-number.</description>
      <created by="Tim Mills" on="2015-09-14"/>
      <test>format-number(xs:decimal('123456789'), '#,##,##,00')</test>
      <result>
         <assert-string-value>1,23,45,67,89</assert-string-value>
      </result>
   </test-case>

  <test-case name="cbcl-fn-format-number-015">
      <description>Check grouping formating in format-number.</description>
      <created by="Tim Mills" on="2015-09-14"/>
      <modified by="Michael Kay" on="2016-04-19" change="See bug 29534"/>
      <test>format-number(xs:decimal('123456789'), '###,##,00')</test>
      <result>
         <assert-string-value>12345,67,89</assert-string-value>
      </result>
   </test-case>

  <test-case name="cbcl-fn-format-number-016">
      <description>Check grouping formating in format-number.</description>
      <created by="Tim Mills" on="2015-09-14"/>
      <test>format-number(xs:decimal('123456789'), '####,###,##,0')</test>
      <result>
         <assert-string-value>123,456,78,9</assert-string-value>
      </result>
   </test-case>

  <test-case name="cbcl-fn-format-number-017">
      <description>Check edge case with large numbers in format-number.</description>
      <created by="Tim Mills" on="2015-09-14"/>
      <modified by="Tim Mills" on="2015-09-30" change="Reflect specificaion change in Bug #28845" />
      <test>format-number(xs:decimal('79228162514264337593543950335'), '0%')</test>
      <result>
	 <any-of>
	    <error code="FOCA0001"/>
	    <assert-string-value>Infinity%</assert-string-value>
	    <assert-string-value>7922816251426433759354395033500%</assert-string-value>
	 </any-of>
      </result>
   </test-case>

  <test-case name="cbcl-fn-format-number-018">
      <description>Check grouping formating in format-number.</description>
      <created by="Tim Mills" on="2015-09-14"/>
      <test>format-number(xs:decimal('0'), '.#')</test>
      <result>
         <assert-string-value>.0</assert-string-value>
      </result>
  </test-case>

  <test-case name="cbcl-fn-format-number-019">
      <description>Check grouping formating in format-number.</description>
      <created by="Tim Mills" on="2015-09-14"/>
      <test>format-number(xs:decimal('0'), '#.')</test>
      <result>
         <assert-string-value>0</assert-string-value>
      </result>
   </test-case>

  <test-case name="cbcl-fn-format-number-020">
      <description>Check grouping formating in format-number.</description>
      <created by="Tim Mills" on="2015-09-14"/>
      <test>format-number(xs:decimal('0'), '.0')</test>
      <result>
         <assert-string-value>.0</assert-string-value>
      </result>
   </test-case>

  <test-case name="cbcl-fn-format-number-021">
      <description>Check grouping formating in format-number.</description>
      <created by="Tim Mills" on="2015-09-14"/>
      <test>format-number(xs:decimal('0'), '0.')</test>
      <result>
         <assert-string-value>0</assert-string-value>
      </result>
   </test-case>


  <test-case name="cbcl-fn-format-number-022">
      <description>Check grouping formating in format-number.</description>
      <created by="Tim Mills" on="2015-09-14"/>
      <test>format-number(xs:decimal('1.10203040506070809'), 
                                     '0.00000000000000000%')</test>
      <result>
         <assert-string-value>110.20304050607080900%</assert-string-value>
      </result>
   </test-case>

  <test-case name="cbcl-fn-format-number-023">
      <description>Check rounding in format-number.</description>
      <created by="Tim Mills" on="2015-09-14"/>
      <test>format-number(xs:double('123456789'), '#,#')</test>
      <result>
         <assert-string-value>1,2,3,4,5,6,7,8,9</assert-string-value>
      </result>
   </test-case>

  <test-case name="cbcl-fn-format-number-024">
      <description>Check rounding in format-number.</description>
      <created by="Tim Mills" on="2015-09-14"/>
      <test>format-number(xs:double('123456789'), '#,##,00')</test>
      <result>
         <assert-string-value>1,23,45,67,89</assert-string-value>
      </result>
   </test-case>

  <test-case name="cbcl-fn-format-number-025">
      <description>Check rounding in format-number.</description>
      <created by="Tim Mills" on="2015-09-14"/>
      <test>format-number(xs:double('123456789'), '##,##,00')</test>
      <result>
         <assert-string-value>1,23,45,67,89</assert-string-value>
      </result>
   </test-case>

  <test-case name="cbcl-fn-format-number-026">
      <description>Check rounding in format-number.</description>
      <created by="Tim Mills" on="2015-09-14"/>
      <test>format-number(xs:double('123456789'), '#,##,##,00')</test>
      <result>
         <assert-string-value>1,23,45,67,89</assert-string-value>
      </result>
   </test-case>

  <test-case name="cbcl-fn-format-number-027">
      <description>Check rounding in format-number.</description>
      <created by="Tim Mills" on="2015-09-14"/>
      <modified by="Michael Kay" on="2016-04-19" change="See bug 29534"/>
      <test>format-number(xs:double('123456789'), '###,##,00')</test>
      <result>
         <assert-string-value>12345,67,89</assert-string-value>
      </result>
   </test-case>

  <test-case name="cbcl-fn-format-number-028">
      <description>Check rounding in format-number.</description>
      <created by="Tim Mills" on="2015-09-14"/>
      <test>format-number(xs:double('123456789'), '####,###,##,0')</test>
      <result>
         <assert-string-value>123,456,78,9</assert-string-value>
      </result>
   </test-case>

  <test-case name="cbcl-fn-format-number-029">
      <description>Check rounding in format-number.</description>
      <created by="Tim Mills" on="2015-09-14"/>
      <test>format-number(xs:double('123456789'), '####,###,##,0')</test>
      <result>
         <assert-string-value>123,456,78,9</assert-string-value>
      </result>
   </test-case>

  <test-case name="cbcl-fn-format-number-030">
      <description>Check grouping formating in format-number.</description>
      <created by="Tim Mills" on="2015-09-14"/>
      <test>format-number(xs:double('0'), '.#')</test>
      <result>
         <assert-string-value>.0</assert-string-value>
      </result>
   </test-case>

  <test-case name="cbcl-fn-format-number-031">
      <description>Check grouping formating in format-number.</description>
      <created by="Tim Mills" on="2015-09-14"/>
      <test>format-number(xs:double('0'), '#.')</test>
      <result>
         <assert-string-value>0</assert-string-value>
      </result>
   </test-case>

  <test-case name="cbcl-fn-format-number-032">
      <description>Check grouping formating in format-number.</description>
      <created by="Tim Mills" on="2015-09-14"/>
      <test>format-number(xs:double('0'), '.0')</test>
      <result>
         <assert-string-value>.0</assert-string-value>
      </result>
   </test-case>

  <test-case name="cbcl-fn-format-number-033">
      <description>Check grouping formating in format-number.</description>
      <created by="Tim Mills" on="2015-09-14"/>
      <test>format-number(xs:double('0'), '0.')</test>
      <result>
         <assert-string-value>0</assert-string-value>
      </result>
   </test-case>

  <test-case name="cbcl-fn-format-number-034">
      <description>Check edge case in format-number.</description>
    <created by="Tim Mills" on="2015-09-14"/>
    <modified by="Tim Mills" on="2015-09-30" change="Reflect specificaion change in Bug #28845" />
      <test>format-number(xs:double('1e308'), '0%')</test>
      <result>
           <assert-string-value>Infinity%</assert-string-value>
      </result>
   </test-case>

  <test-case name="cbcl-fn-format-number-035">
      <description>Check per-mille multiplier in format-number.</description>
      <created by="Tim Mills" on="2015-09-14"/>
      <test>substring-after(
              format-number(xs:double('1.102030405060708090'),
                                    '0.00000000000000000&#8240;'),
              format-number(xs:double('1.102030405060708090') * 1000, 
                                    '0.00000000000000000')) eq '&#8240;'</test>
      <result>
         <assert-true />
      </result>
   </test-case>

  <test-case name="cbcl-fn-format-number-036">
      <description>Check edge case in format-number.</description>
      <created by="Tim Mills" on="2015-09-14"/>
      <test>format-number(xs:double('-1e308'), '0%')</test>
      <result>
           <assert-string-value>-Infinity%</assert-string-value>
      </result>
   </test-case>

  <test-case name="cbcl-fn-format-number-037">
      <description>Check edge case with large numbers in format-number.</description>
      <created by="Tim Mills" on="2015-09-30"/>
      <test>format-number(xs:decimal('-79228162514264337593543950335'), '0%')</test>
      <result>
	 <any-of>
	    <error code="FOCA0001"/>
	    <assert-string-value>-Infinity%</assert-string-value>
	    <assert-string-value>-7922816251426433759354395033500%</assert-string-value>
	 </any-of>
      </result>
   </test-case>


  <test-case name="cbcl-fn-format-number-038">
      <description>Check  with small doubles in format-number.</description>
      <created by="Tim Mills" on="2015-09-30"/>
      <test>format-number(xs:double('0.1'), '0.00')</test>
      <result>
	<assert-string-value>0.10</assert-string-value>
      </result>
   </test-case>

  <test-case name="cbcl-fn-format-number-039">
      <description>Check with small doubles in format-number.</description>
      <created by="Tim Mills" on="2015-09-30"/>
      <test>format-number(xs:double('0.01'), '0.00')</test>
      <result>
	<assert-string-value>0.01</assert-string-value>
      </result>
   </test-case>

  <test-case name="cbcl-fn-format-number-040">
      <description>Check with small doubles in format-number.</description>
      <created by="Tim Mills" on="2015-09-30"/>
      <test>format-number(xs:double('0'), '#.00')</test>
      <result>
	<assert-string-value>.00</assert-string-value>
      </result>
   </test-case>

  <test-case name="cbcl-fn-format-number-041">
      <description>Check with small doubles in format-number.</description>
      <created by="Tim Mills" on="2015-09-30"/>
      <test>format-number(xs:double('0'), '#.##')</test>
      <result>
	<assert-string-value>.0</assert-string-value>
      </result>
   </test-case>

  <test-case name="cbcl-fn-format-number-042">
      <description>Check with small doubles in format-number.</description>
      <created by="Tim Mills" on="2015-09-30"/>
      <test>format-number(xs:double('0'), '0.00')</test>
      <result>
	<assert-string-value>0.00</assert-string-value>
      </result>
   </test-case>

  <test-case name="cbcl-fn-format-number-043">
      <description>Check  with small decimals in format-number.</description>
      <created by="Tim Mills" on="2015-09-30"/>
      <test>format-number(xs:double('0.1'), '0.00')</test>
      <result>
	<assert-string-value>0.10</assert-string-value>
      </result>
   </test-case>

  <test-case name="cbcl-fn-format-number-044">
      <description>Check with small decimals in format-number.</description>
      <created by="Tim Mills" on="2015-09-30"/>
      <test>format-number(xs:double('0.01'), '0.00')</test>
      <result>
	<assert-string-value>0.01</assert-string-value>
      </result>
   </test-case>

  <test-case name="cbcl-fn-format-number-045">
      <description>Check with small decimals in format-number.</description>
      <created by="Tim Mills" on="2015-09-30"/>
      <test>format-number(xs:double('0.01'), '0.00')</test>
      <result>
	<assert-string-value>0.01</assert-string-value>
      </result>
   </test-case>

  <test-case name="cbcl-fn-format-number-046">
      <description>Check with small decimals in format-number.</description>
      <created by="Tim Mills" on="2015-09-30"/>
      <test>format-number(xs:double('0.01'), '0.00')</test>
      <result>
	<assert-string-value>0.01</assert-string-value>
      </result>
   </test-case>

  <test-case name="cbcl-fn-format-number-047">
      <description>Check with small decimals in format-number.</description>
      <created by="Tim Mills" on="2015-09-30"/>
      <test>format-number(xs:double('0'), '#.00')</test>
      <result>
	<assert-string-value>.00</assert-string-value>
      </result>
   </test-case>

  <test-case name="cbcl-fn-format-number-048">
      <description>Check with small decimals in format-number.</description>
      <created by="Tim Mills" on="2015-09-30"/>
      <test>format-number(xs:decimal('0'), '#.00')</test>
      <result>
	<assert-string-value>.00</assert-string-value>
      </result>
   </test-case>

  <test-case name="cbcl-fn-format-number-049">
      <description>Check with small decimals in format-number.</description>
      <created by="Tim Mills" on="2015-09-30"/>
      <test>format-number(xs:decimal('0'), '###,###.##')</test>
      <result>
	<assert-string-value>.0</assert-string-value>
      </result>
   </test-case>

  <test-case name="cbcl-fn-format-number-050">
      <description>Check with small decimals in format-number.</description>
      <created by="Tim Mills" on="2015-09-30"/>
      <test>format-number(xs:double('0'), '###,###.##')</test>
      <result>
	<assert-string-value>.0</assert-string-value>
      </result>
   </test-case>

  <test-case name="cbcl-fn-format-number-051">
      <description>Check with small decimals in format-number.</description>
      <created by="Tim Mills" on="2015-09-30"/>
      <test>format-number(xs:decimal('0.1'), '###,###.##')</test>
      <result>
	<assert-string-value>.1</assert-string-value>
      </result>
   </test-case>

  <test-case name="cbcl-fn-format-number-052">
      <description>Check with small decimals in format-number.</description>
      <created by="Tim Mills" on="2015-09-30"/>
      <test>format-number(xs:double('0.1'), '###,###.##')</test>
      <result>
	<assert-string-value>.1</assert-string-value>
      </result>
   </test-case>



</test-set>
