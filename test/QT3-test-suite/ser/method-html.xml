<?xml version="1.0" encoding="us-ascii"?>
<test-set xmlns="http://www.w3.org/2010/09/qt-fots-catalog" name="method-html">
   <description>Tests for the Serialization method HTML</description>
   <link type="spec" document="http://www.w3.org/TR/xquery-30/"
         idref="doc-xquery30-Serialization"/>

   <test-case name="Serialization-html-1" covers-30="html-output">
      <description>Test that HTML 4.0 elements with empty content model are serialized using only a start tag</description>
      <created by="Henry Zongaro" on="2012-10-26"/>
      <modified by="O'Neil Delpratt" on="2013-05-30" change="added dependency inline with bug issue #21868"/>
      <dependency type="feature" value="serialization" satisfied="true"/>
      <dependency type="spec" value="XQ30+"/>
      <test><![CDATA[
declare boundary-space strip;
declare namespace output = "http://www.w3.org/2010/xslt-xquery-serialization";
declare option output:method  "html";
declare option output:indent  "no";
declare option output:version  "4.0";

<html><body><area/><base/><br/><col/><embed/><frame/><hr/><img/><input/><isindex/><link/><meta/><param/></body></html>
]]></test>
      <result>
         <serialization-matches><![CDATA[<html><body><area><base><br><col><embed><frame><hr><img><input><isindex><link><meta><param></body></html>]]></serialization-matches>
      </result>
   </test-case>

   <test-case name="Serialization-html-2" covers-30="html-output">
      <description>Test that HTML 5.0 elements with empty content model are serialized using only a start tag</description>
      <created by="Henry Zongaro" on="2012-10-26"/>
      <modified by="O'Neil Delpratt" on="2013-05-30" change="added dependency inline with bug issue #21868"/>
      <modified by="Michael Kay" on="2017-06-18" change="removed 'command' element, see bug 30119"/>
      <dependency type="feature" value="serialization" satisfied="true"/>
      <dependency type="spec" value="XQ30+"/>
      <test><![CDATA[
declare boundary-space strip;        
declare namespace output = "http://www.w3.org/2010/xslt-xquery-serialization";
declare option output:method  "html";
declare option output:indent  "no";
declare option output:version  "5.0";

<html><body><area/><base/><br/><col/><embed/><hr/><img/><input/><keygen/><link/><meta/><param/><source/><track/><wbr/></body></html>
]]></test>
      <result>
         <all-of>
           <serialization-matches><![CDATA[<html><body><area><base><br><col><embed><hr><img><input><keygen><link><meta><param><source><track><wbr></body></html>]]></serialization-matches>
           <serialization-matches flags="i"><![CDATA[<!DOCTYPE .*]]></serialization-matches>
         </all-of>
      </result>
   </test-case>

   <test-case name="Serialization-html-3" covers-30="html-output">
      <description>Test that elements in the XHTML namespace whose local names match those of HTML 4.0 elements with empty content model are serialized as XML</description>
      <created by="Henry Zongaro" on="2012-10-26"/>
      <modified by="O'Neil Delpratt" on="2013-05-15" change="Added alternative result. See bug issue #21968" />
      <modified by="O'Neil Delpratt" on="2013-05-30" change="added dependency inline with bug issue #21868"/>
      <dependency type="feature" value="serialization" satisfied="true"/>
      <dependency type="spec" value="XQ30+"/>
      <test><![CDATA[
declare boundary-space strip;        
declare namespace output = "http://www.w3.org/2010/xslt-xquery-serialization";
declare option output:method  "html";
declare option output:indent  "no";
declare option output:version  "4.0";

<html xmlns="http://www.w3.org/1999/xhtml"><body><area/><base/><br/><col/><embed/><frame/><hr/><img/><input/><isindex/><link/><meta/><param/></body></html>
]]></test>
      <result>
         <any-of>
            <serialization-matches><![CDATA[<html xmlns="http://www.w3.org/1999/xhtml"><body><area/><base/><br/><col/><embed/><frame/><hr/><img/><input/><isindex/><link/><meta/><param/></body></html>]]></serialization-matches>
            <serialization-matches><![CDATA[<html xmlns="http://www.w3.org/1999/xhtml"><body><area></area><base></base><br></br><col></col><embed></embed><frame></frame><hr></hr><img></img><input></input><isindex></isindex><link></link><meta></meta><param></param></body></html>]]></serialization-matches>
         </any-of>
      </result>
   </test-case>

   <test-case name="Serialization-html-4" covers-30="html-output">
      <description>Test that elements in the XHTML namespace whose local names match those of HTML 5.0 elements with empty content model are serialized using only a start tag</description>
      <created by="Henry Zongaro" on="2012-10-26"/>
      <modified by="O'Neil Delpratt" on="2013-05-30" change="added dependency inline with bug issue #21868"/>
      <modified by="Christian Gruen" on="2015-04-28" change="isindex and frame removed (implementation-defined, see 7.1)"/>
      <modified by="Christian Gruen" on="2015-05-20" change="isindex and frame removed (fix)"/>
      <dependency type="feature" value="serialization" satisfied="true"/>
      <dependency type="spec" value="XQ30+"/>
      <test><![CDATA[
declare boundary-space strip;        
declare namespace output = "http://www.w3.org/2010/xslt-xquery-serialization";
declare option output:method  "html";
declare option output:indent  "no";
declare option output:version  "5.0";

<html xmlns="http://www.w3.org/1999/xhtml"><body><area/><base/><br/><col/><embed
/><hr/><img/><input/><link/><meta/><param/></body></html>
]]></test>
      <result>
         <all-of>
           <serialization-matches><![CDATA[<html xmlns="http://www.w3.org/1999/xhtml"><body><area><base><br><col><embed><hr><img><input><link><meta><param></body></html>]]></serialization-matches>
           <serialization-matches flags="i"><![CDATA[<!DOCTYPE .*]]></serialization-matches>
         </all-of>
      </result>
   </test-case>

   <test-case name="Serialization-html-5" covers-30="html-output">
      <description>Test serialization of XML islands for HTML 4.0</description>
      <created by="Henry Zongaro" on="2012-10-26"/>
      <dependency type="spec" value="XQ30+"/>
      <test><![CDATA[ () ]]></test>
      <result>
        <assert-empty />
      </result>
   </test-case>

   <test-case name="Serialization-html-6" covers-30="html-output">
      <description>Test serialization of XML islands for HTML 5.0</description>
      <created by="Henry Zongaro" on="2012-10-26"/>
      <dependency type="spec" value="XQ30+"/>
      <test><![CDATA[ () ]]></test>
      <result>
        <assert-empty />
      </result>
   </test-case>

   <test-case name="Serialization-html-7" covers-30="html-output">
      <description>Test serialization of unknown elements in no namespace for HTML 5.0</description>
      <created by="Henry Zongaro" on="2012-10-26"/>
      <dependency type="spec" value="XQ30+"/>
      <test><![CDATA[ () ]]></test>
      <result>
        <assert-empty />
      </result>
   </test-case>

   <test-case name="Serialization-html-8" covers-30="html-output">
      <description>Test serialization of unknown elements in no namespace or in the XHTML namespace for HTML 5.0</description>
      <created by="Henry Zongaro" on="2012-10-26"/>
      <dependency type="spec" value="XQ30+"/>
      <test><![CDATA[ () ]]></test>
      <result>
        <assert-empty />
      </result>
   </test-case>

   <test-case name="Serialization-html-9" covers-30="html-output">
      <description>Test that no escaping is performed for text node descendants or attributes of same in the script and style elements</description>
      <created by="Henry Zongaro" on="2012-10-26"/>
      <dependency type="spec" value="XQ30+"/>
      <test><![CDATA[ () ]]></test>
      <result>
        <assert-empty />
      </result>
   </test-case>

   <test-case name="Serialization-html-10" covers-30="html-output">
      <description>Verify HTML elements are recognized regardless of case</description>
      <created by="Henry Zongaro" on="2012-10-26"/>
      <dependency type="spec" value="XQ30+"/>
      <test><![CDATA[ () ]]></test>
      <result>
        <assert-empty />
      </result>
   </test-case>

   <test-case name="Serialization-html-11" covers-30="html-output">
      <description>Verify that an ampersand in an attribute value is not escaped if it is immediately followed by a left brace</description>
      <created by="Henry Zongaro" on="2012-10-26"/>
      <dependency type="spec" value="XQ30+"/>
      <test><![CDATA[ () ]]></test>
      <result>
        <assert-empty />
      </result>
   </test-case>

   <test-case name="Serialization-html-12" covers-30="html-output">
      <description>Verify boolean attributes in HTML 4.0 are serialized in minimized form only if the name and value match, without regard to case</description>
      <created by="Henry Zongaro" on="2012-10-26"/>
      <dependency type="spec" value="XQ30+"/>
     <test><![CDATA[ () ]]></test>
      <result>
        <assert-empty />
      </result>
   </test-case>

   <test-case name="Serialization-html-13" covers-30="html-output">
      <description>Verify boolean attributes in HTML 5.0 are serialized in minimized form only if the name and value match, without regard to case</description>
      <created by="Henry Zongaro" on="2012-10-26"/>
      <dependency type="spec" value="XQ30+"/>
     <test><![CDATA[ () ]]></test>
      <result>
        <assert-empty />
      </result>
   </test-case>

   <test-case name="Serialization-html-14" covers-30="html-output">
      <description>Test the effect of the indent serialization parameter with value yes</description>
      <created by="Henry Zongaro" on="2012-10-26"/>
      <dependency type="spec" value="XQ30+"/>
     <test><![CDATA[ () ]]></test>
      <result>
        <assert-empty />
      </result>
   </test-case>

   <test-case name="Serialization-html-15" covers-30="html-output">
      <description>Test the effect of the indent serialization parameter with value no</description>
      <created by="Henry Zongaro" on="2012-10-26"/>
      <dependency type="spec" value="XQ30+"/>
     <test><![CDATA[ () ]]></test>
      <result>
        <assert-empty />
      </result>
   </test-case>

   <test-case name="Serialization-html-16" covers-30="html-output">
      <description>Test the effect of the suppress-indentation serialization parameter if the indent parameter has value yes</description>
      <created by="Henry Zongaro" on="2012-10-26"/>
      <dependency type="spec" value="XQ30+"/>
     <test><![CDATA[ () ]]></test>
      <result>
        <assert-empty />
      </result>
   </test-case>

   <test-case name="Serialization-html-17" covers-30="html-output">
      <description>Test the effect of the suppress-indentation serialization parameter if the indent parameter has value no</description>
      <created by="Henry Zongaro" on="2012-10-26"/>
      <dependency type="spec" value="XQ30+"/>
     <test><![CDATA[ () ]]></test>
      <result>
        <assert-empty />
      </result>
   </test-case>

   <test-case name="Serialization-html-18" covers-30="html-output">
      <description>Test with cdata-section-elements for HTML 4.0</description>
      <created by="Henry Zongaro" on="2012-10-26"/>
      <modified by="O'Neil Delpratt" on="2013-05-30" change="added dependency inline with bug issue #21868"/>
      <modified by="Michael Kay" on="2013-06-13" change="correct expected result"/>
      <dependency type="feature" value="serialization" satisfied="true"/>
      <dependency type="spec" value="XQ30+"/>
      <test><![CDATA[
declare namespace output = "http://www.w3.org/2010/xslt-xquery-serialization";
declare namespace ex = "http://www.example.org";
declare option output:method  "html";
declare option output:indent  "no";
declare option output:version  "4.0";
declare option output:cdata-section-elements  "p em ex:isle1";

<html><body><p>No CDATA<em>No CDATA</em>No CDATA<ex:isle1>Some CDATA<ex:isle2>No CDATA</ex:isle2>More CDATA</ex:isle1></p></body></html>]]></test>
      <result>
        <serialization-matches><![CDATA[<html><body><p>No CDATA<em>No CDATA</em>No CDATA<ex:isle1 *xmlns:ex=(['"])http://www.example.org\1><!\[CDATA\[Some CDATA\]\]><ex:isle2>No CDATA</ex:isle2><!\[CDATA\[More CDATA\]\]></ex:isle1></p></body></html>]]></serialization-matches>
      </result>
   </test-case>

   <test-case name="Serialization-html-19a" covers-30="html-output">
      <description>Test with cdata-section-elements for HTML 5.0</description>
      <created by="Henry Zongaro" on="2012-10-26"/>
      <modified by="O'Neil Delpratt" on="2013-05-30" change="added dependency inline with bug issue #21868"/>
      <modified by="Michael Kay" on="2013-06-13" change="correct expected result"/>
      <dependency type="feature" value="serialization" satisfied="true"/>
      <dependency type="spec" value="XQ30+"/>
      <test><![CDATA[
declare namespace output = "http://www.w3.org/2010/xslt-xquery-serialization";
declare namespace ex = "http://www.example.org";
declare option output:method  "html";
declare option output:indent  "no";
declare option output:version  "5.0";
declare option output:cdata-section-elements  "p em ex:isle1";

<html><body><p>No CDATA<em>No CDATA</em>No CDATA<ex:isle1>Some CDATA<ex:isle2>No CDATA</ex:isle2>More CDATA</ex:isle1></p></body></html>]]></test>
      <result>
        <serialization-matches><![CDATA[<html><body><p>No CDATA<em>No CDATA</em>No CDATA<ex:isle1 *xmlns:ex=(['"])http://www.example.org\1><!\[CDATA\[Some CDATA\]\]><ex:isle2>No CDATA</ex:isle2><!\[CDATA\[More CDATA\]\]></ex:isle1></p></body></html>]]></serialization-matches>
      </result>
   </test-case>

   <test-case name="Serialization-html-19b" covers-30="html-output">
      <description>Test with cdata-section-elements for HTML 4.0</description>
      <created by="Henry Zongaro" on="2012-10-26"/>
      <modified by="O'Neil Delpratt" on="2013-05-30" change="added dependency inline with bug issue #21868"/>
      <modified by="Michael Kay" on="2013-06-13" change="correct expected result"/>
      <dependency type="feature" value="serialization" satisfied="true"/>
      <dependency type="spec" value="XQ30+"/>
      <test><![CDATA[
declare namespace output = "http://www.w3.org/2010/xslt-xquery-serialization";
declare namespace html = "http://www.w3.org/1999/xhtml";
declare option output:method  "html";
declare option output:indent  "no";
declare option output:version  "4.0";
declare option output:cdata-section-elements  "b html:em";

<html><body><p><b>No CDATA</b><em>No CDATA</em><html:b>No CDATA</html:b><html:em>Some CDATA</html:em></p></body></html>]]></test>
      <result>
        <serialization-matches><![CDATA[<html><body><p><b>No CDATA</b><em>No CDATA</em><html:b *xmlns:html=(['"])http://www.w3.org/1999/xhtml\1>No CDATA</html:b><html:em *xmlns:html=(['"])http://www.w3.org/1999/xhtml\2><!\[CDATA\[Some CDATA\]\]></html:em></p></body></html>]]></serialization-matches>
      </result>
   </test-case>

   <test-case name="Serialization-html-19c" covers-30="html-output">
      <description>Test with cdata-section-elements for HTML 5.0</description>
      <created by="Henry Zongaro" on="2012-10-26"/>
      <modified by="O'Neil Delpratt" on="2013-05-30" change="added dependency inline with bug issue #21868"/>
      <modified by="Michael Kay" on="2013-06-13" change="correct expected result"/>
      <dependency type="feature" value="serialization" satisfied="true"/>
      <dependency type="spec" value="XQ30+"/>
      <test><![CDATA[
declare namespace output = "http://www.w3.org/2010/xslt-xquery-serialization";
declare namespace html = "http://www.w3.org/1999/xhtml";
declare option output:method  "html";
declare option output:indent  "no";
declare option output:version  "5.0";
declare option output:cdata-section-elements  "b html:em";

<html><body><p><b>No CDATA</b><em>No CDATA</em><html:b>No CDATA</html:b><html:em>No CDATA</html:em></p></body></html>]]></test>
      <result>
        <serialization-matches><![CDATA[<html><body><p><b>No CDATA</b><em>No CDATA</em><html:b *xmlns:html=(['"])http://www.w3.org/1999/xhtml\1>No CDATA</html:b><html:em *xmlns:html=(['"])http://www.w3.org/1999/xhtml\2>No CDATA</html:em></p></body></html>]]></serialization-matches>
      </result>
   </test-case>

   <test-case name="Serialization-html-20" covers-30="html-output">
      <description>Test with doctype-public and doctype-system absent for HTML 4.0</description>
      <created by="Henry Zongaro" on="2012-10-26"/>
      <modified by="O'Neil Delpratt" on="2013-05-08" change="Added alternate result" />
      <dependency type="spec" value="XQ30+"/>
      <test><![CDATA[
declare namespace output = "http://www.w3.org/2010/xslt-xquery-serialization";
declare option output:method  "html";
declare option output:indent  "no";
declare option output:version  "4.0";

<html/>
]]></test>
      <result>
        <any-of>
          <serialization-matches><![CDATA[<html/>]]></serialization-matches>
          <serialization-matches><![CDATA[<html></html>]]></serialization-matches>
        </any-of>
      </result>
   </test-case>

   <test-case name="Serialization-html-21" covers-30="html-output">
      <description>Test with doctype-public and doctype-system absent for HTML 4
.0 and first child is HTML</description>
      <created by="Henry Zongaro" on="2012-10-26"/>
      <modified by="O'Neil Delpratt" on="2013-05-08" change="Added alternate result" />
      <dependency type="spec" value="XQ30+"/>
      <test><![CDATA[
declare namespace output = "http://www.w3.org/2010/xslt-xquery-serialization";
declare option output:method  "html";
declare option output:indent  "no";
declare option output:version  "5.0";

<html/>
]]></test>
      <result>
        <any-of>
          <serialization-matches><![CDATA[<html/>]]></serialization-matches>
          <serialization-matches><![CDATA[<html></html>]]></serialization-matches>
        </any-of>
      </result>
   </test-case>

   <test-case name="Serialization-html-22" covers-30="html-output">
      <description>Test with doctype-public and doctype-system absent for HTML 5.0 and first child is HTML</description>
      <created by="Henry Zongaro" on="2012-10-26"/>
      <modified by="O'Neil Delpratt" on="2013-05-08" change="Added alternate result" />
      <modified by="O'Neil Delpratt" on="2013-05-30" change="added dependency inline with bug issue #21868"/>
      <dependency type="feature" value="serialization" satisfied="true"/>
      <dependency type="spec" value="XQ30+"/>
      <test><![CDATA[
declare namespace output = "http://www.w3.org/2010/xslt-xquery-serialization";
declare option output:method  "html";
declare option output:indent  "no";
declare option output:version  "5.0";

<html/>
]]></test>
      <result>
        <all-of>
          <any-of>
            <serialization-matches><![CDATA[<html/>]]></serialization-matches>
            <serialization-matches><![CDATA[<html></html>]]></serialization-matches>
          </any-of>
          <serialization-matches flags="i"><![CDATA[<!DOCTYPE .*]]></serialization-matches>
        </all-of>
      </result>
   </test-case>

   <test-case name="Serialization-html-23" covers-30="html-output">
      <description>Test with doctype-public and doctype-system absent for HTML 4
.0 and first child is not HTML</description>
      <created by="Henry Zongaro" on="2012-10-26"/>
      <modified by="Michael Kay" on="2013-06-13" change="See bug 22350"/>
      <dependency type="feature" value="serialization" satisfied="true"/>
      <dependency type="spec" value="XQ30+"/>
      <test><![CDATA[
declare namespace output = "http://www.w3.org/2010/xslt-xquery-serialization";
declare option output:method  "html";
declare option output:indent  "no";
declare option output:version  "4.0";

<foo/>
]]></test>
      <result>
        <serialization-matches><![CDATA[<foo></foo>]]></serialization-matches>
      </result>
   </test-case>

   <test-case name="Serialization-html-24" covers-30="html-output">
      <description>Test with doctype-public and doctype-system absent for HTML 5.0 and first child is not HTML</description>
      <created by="Henry Zongaro" on="2012-10-26"/>
      <modified by="Michael Kay" on="2013-06-13" change="See bug 22350"/>
      <dependency type="feature" value="serialization" satisfied="true"/>
      <dependency type="spec" value="XQ30+"/>
      <test><![CDATA[
declare namespace output = "http://www.w3.org/2010/xslt-xquery-serialization";
declare option output:method  "html";
declare option output:indent  "no";
declare option output:version  "5.0";

<foo/>
]]></test>
      <result>
        <serialization-matches><![CDATA[<foo></foo>]]></serialization-matches>
      </result>
   </test-case>

   <test-case name="Serialization-html-25" covers-30="html-output">
      <description>Test with doctype-public present and doctype-system absent for HTML 4.0</description>
      <created by="Henry Zongaro" on="2012-10-26"/>
      <modified by="O'Neil Delpratt" on="2013-05-30" change="added dependency inline with bug issue #21868"/>
      <modified by="Michael Kay" on="2013-06-14" change="relax the result patterns"/>
      <dependency type="feature" value="serialization" satisfied="true"/>
      <dependency type="spec" value="XQ30+"/>
      <test><![CDATA[
declare namespace output = "http://www.w3.org/2010/xslt-xquery-serialization";
declare option output:method  "html";
declare option output:indent  "no";
declare option output:version  "4.0";
declare option output:doctype-public  "-//W3C//DTD HTML 4.0//EN";

<html/>
]]></test>
      <result>
        <all-of>
          <serialization-matches flags="i"><![CDATA[<!DOCTYPE\s+html\s+PUBLIC\s+(['"])-//W3C//DTD HTML 4.0//EN\1\s*>\s*<html]]></serialization-matches>
          <serialization-matches flags="s"><![CDATA[html.+<html]]></serialization-matches>
        </all-of>
      </result>
   </test-case>

   <test-case name="Serialization-html-26" covers-30="html-output">
      <description>Test with doctype-system present and doctype-public absent for HTML 4.0</description>
      <created by="Henry Zongaro" on="2012-10-26"/>
      <modified by="O'Neil Delpratt" on="2013-05-30" change="added dependency inline with bug issue #21868"/>
      <modified by="Michael Kay" on="2013-06-14" change="relax the result patterns"/>
      <dependency type="feature" value="serialization" satisfied="true"/>
      <dependency type="spec" value="XQ30+"/>
      <test><![CDATA[
declare namespace output = "http://www.w3.org/2010/xslt-xquery-serialization";
declare option output:method  "html";
declare option output:indent  "no";
declare option output:version  "4.0";
declare option output:doctype-system  "http://www.w3.org/TR/REC-html40/strict.dtd";

<html/>
]]></test>
      <result>
        <all-of>
          <serialization-matches flags="i"><![CDATA[<!DOCTYPE\s+html\s+SYSTEM\s+(['"])http://www.w3.org/TR/REC-html40/strict.dtd\1\s*>\s*<html]]></serialization-matches>
          <serialization-matches flags="s"><![CDATA[html.+<html]]></serialization-matches>
        </all-of>
      </result>
   </test-case>

   <test-case name="Serialization-html-27" covers-30="html-output">
      <description>Test with doctype-public present and doctype-system absent for HTML 5</description>
      <created by="Henry Zongaro" on="2012-10-26"/>
      <modified by="O'Neil Delpratt" on="2013-05-30" change="added dependency inline with bug issue #21868"/>
      <modified by="Michael Kay" on="2013-06-14" change="relax the result patterns"/>
      <dependency type="feature" value="serialization" satisfied="true"/>
      <dependency type="spec" value="XQ30+"/>
      <test><![CDATA[
declare namespace output = "http://www.w3.org/2010/xslt-xquery-serialization";
declare option output:method  "html";
declare option output:indent  "no";
declare option output:version  "5.0";
declare option output:doctype-public  "-//W3C//DTD HTML 4.0//EN";

<html/>
]]></test>
      <result>
        <all-of>
          <serialization-matches flags="i"><![CDATA[<!DOCTYPE\s+html\s+PUBLIC\s+(['"])-//W3C//DTD HTML 4.0//EN\1\s*>\s*<html]]></serialization-matches>
          <serialization-matches flags="s"><![CDATA[html.+<html]]></serialization-matches>
        </all-of>
      </result>
   </test-case>

   <test-case name="Serialization-html-28" covers-30="html-output">
      <description>Test with doctype-system present and doctype-public absent for HTML 5</description>
      <created by="Henry Zongaro" on="2012-10-26"/>
      <modified by="O'Neil Delpratt" on="2013-05-30" change="added dependency inline with bug issue #21868"/>
      <modified by="Michael Kay" on="2013-06-14" change="relax the result patterns"/>
      <dependency type="feature" value="serialization" satisfied="true"/>
      <dependency type="spec" value="XQ30+"/>
      <test><![CDATA[
declare namespace output = "http://www.w3.org/2010/xslt-xquery-serialization";
declare option output:method  "html";
declare option output:indent  "no";
declare option output:version  "5.0";
declare option output:doctype-system  "about:legacy-compat";

<html/>
]]></test>
      <result>
        <all-of>
          <serialization-matches><![CDATA[<!.......\s+html\s+......\s+(['"])about:legacy-compat\1\s*>\s*<html]]></serialization-matches>
          <serialization-matches flags="i"><![CDATA[<!DOCTYPE\s+....\s+SYSTEM]]></serialization-matches>
        </all-of>
      </result>
   </test-case>

   <test-case name="Serialization-html-29" covers-30="html-output">
      <description>Test with doctype-system and doctype-public present for HTML 4.0</description>
      <created by="Henry Zongaro" on="2012-10-26"/>
      <modified by="O'Neil Delpratt" on="2013-05-30" change="added dependency inline with bug issue #21868"/>
      <modified by="Michael Kay" on="2013-06-14" change="relax the result patterns"/>
      <dependency type="feature" value="serialization" satisfied="true"/>
      <dependency type="spec" value="XQ30+"/>
      <test><![CDATA[
declare namespace output = "http://www.w3.org/2010/xslt-xquery-serialization";
declare option output:method  "html";
declare option output:indent  "no";
declare option output:version  "4.0";
declare option output:doctype-system  "http://www.w3.org/TR/REC-html40/strict.dtd";
declare option output:doctype-public  "-//W3C//DTD HTML 4.0//EN";

<html/>
]]></test>
      <result>
        <all-of>
          <serialization-matches><![CDATA[<!.......\s+html\s+......\s+(['"])\-//W3C//DTD HTML 4.0//EN\1\s*(['"])http://www.w3.org/TR/REC\-html40/strict.dtd\2\s*>\s*<html]]></serialization-matches>
          <serialization-matches flags="i"><![CDATA[<!DOCTYPE\s+....\s+PUBLIC]]></serialization-matches>
        </all-of>
      </result>
   </test-case>

   <test-case name="Serialization-html-30" covers-30="html-output">
      <description>Test with doctype-system and doctype-public present for HTML 5.0</description>
      <created by="Henry Zongaro" on="2012-10-26"/>
      <modified by="O'Neil Delpratt" on="2013-05-30" change="added dependency inline with bug issue #21868"/>
      <modified by="Michael Kay" on="2013-06-14" change="relax the result patterns"/>
      <dependency type="feature" value="serialization" satisfied="true"/>
      <dependency type="spec" value="XQ30+"/>
      <test><![CDATA[
declare namespace output = "http://www.w3.org/2010/xslt-xquery-serialization";
declare option output:method  "html";
declare option output:indent  "no";
declare option output:version  "5.0";
declare option output:doctype-system  "http://www.w3.org/TR/REC-html40/strict.dtd";
declare option output:doctype-public  "-//W3C//DTD HTML 4.0//EN";

<html/>
]]></test>
      <result>
        <all-of>
          <serialization-matches><![CDATA[<!.......\s+html\s+......\s+(['"])\-//W3C//DTD HTML 4.0//EN\1\s*(['"])http://www.w3.org/TR/REC\-html40/strict.dtd\2\s*>\s*<html]]></serialization-matches>
          <serialization-matches flags="i"><![CDATA[<!DOCTYPE\s+....\s+PUBLIC]]></serialization-matches>
        </all-of>
      </result>
   </test-case>

   <test-case name="Serialization-html-31" covers-30="html-output">
      <description>Test with normalization-form serialization parameter for HTML 4.0</description>
      <created by="Henry Zongaro" on="2012-10-26"/>
      <dependency type="spec" value="XQ30+"/>
      <test><![CDATA[ () ]]></test>
      <result>
        <assert-empty />
      </result>
   </test-case>

   <test-case name="Serialization-html-32" covers-30="html-output">
      <description>Test with normalization-form serialization parameter for HTML 5.0</description>
      <created by="Henry Zongaro" on="2012-10-26"/>
      <dependency type="spec" value="XQ30+"/>
      <test><![CDATA[ () ]]></test>
      <result>
        <assert-empty />
      </result>
   </test-case>

   <test-case name="Serialization-html-33" covers-30="html-output">
      <description>Test media-type and include-content-type parameters for HTML 4.0, where input had a head element</description>
      <created by="Henry Zongaro" on="2012-10-26"/>
      <modified by="O'Neil Delpratt" on="2013-05-30" change="added dependency inline with bug issue #21868"/>
      <modified by="Michael Kay" on="2013-06-14" change="remove expectation that the generated meta element will end with />"/>
      <dependency type="feature" value="serialization" satisfied="true"/>
      <dependency type="spec" value="XQ30+"/>
      <test><![CDATA[
declare namespace output = "http://www.w3.org/2010/xslt-xquery-serialization";
declare option output:method  "html";
declare option output:indent  "no";
declare option output:include-content-type  "yes";
declare option output:media-type  "text/html";
declare option output:encoding  "UTF-8";
declare option output:version  "4.0";

<html><head/></html>
]]></test>
      <result>
        <all-of>
          <serialization-matches flags="i"><![CDATA[<html><head><meta +(?:(?:http-equiv=(['"])content-type\1 +content=(['"])text/html; *charset=UTF-8\2)|(?:content=(['"])text/html; *charset=UTF-8\3 +http-equiv=(['"])content-type\4)) *></head></html>]]></serialization-matches>
          <serialization-matches><![CDATA[<html><head><[^>]*></head></html>]]></serialization-matches>
        </all-of>
      </result>
   </test-case>

   <test-case name="Serialization-html-34" covers-30="html-output">
      <description>Test media-type and include-content-type parameters for HTML 4.0, where input had a head element already containing a meta element</description>
      <created by="Henry Zongaro" on="2012-10-26"/>
      <modified by="O'Neil Delpratt" on="2013-05-30" change="added dependency inline with bug issue #21868"/>
      <modified by="Michael Kay" on="2013-06-14" change="remove expectation that the generated meta element will end with />"/>
      <dependency type="feature" value="serialization" satisfied="true"/>
      <dependency type="spec" value="XQ30+"/>
      <test><![CDATA[
declare namespace output = "http://www.w3.org/2010/xslt-xquery-serialization";
declare option output:method  "html";
declare option output:indent  "no";
declare option output:include-content-type  "yes";
declare option output:media-type  "text/html";
declare option output:encoding  "UTF-8";
declare option output:version  "4.0";

<html><head><meta http-equiv="Content-Type" content="text/html;version='3.0'"/></head></html>
]]></test>
      <result>
        <all-of>
          <serialization-matches flags="i"><![CDATA[<html><head><meta +(?:(?:http-equiv=(['"])content-type\1 +content=(['"])text/html; *charset=UTF-8\2)|(?:content=(['"])text/html; *charset=UTF-8\3 +http-equiv=(['"])content-type\4)) *></head></html>]]></serialization-matches>
          <serialization-matches><![CDATA[<html><head><[^>]*></head></html>]]></serialization-matches>
        </all-of>
      </result>
   </test-case>

   <test-case name="Serialization-html-35" covers-30="html-output">
      <description>Test media-type and include-content-type parameters for HTML 4.0, where input had no head element</description>
      <created by="Henry Zongaro" on="2012-10-26"/>
      <modified by="O'Neil Delpratt" on="2013-05-30" change="added dependency inline with bug issue #21868"/>
      <dependency type="feature" value="serialization" satisfied="true"/>
      <dependency type="spec" value="XQ30+"/>
      <test><![CDATA[
declare namespace output = "http://www.w3.org/2010/xslt-xquery-serialization";
declare option output:method  "html";
declare option output:indent  "no";
declare option output:include-content-type  "yes";
declare option output:media-type  "text/html";
declare option output:encoding  "UTF-8";
declare option output:version  "4.0";

<html/>
]]></test>
      <result>
        <all-of>
          <serialization-matches><![CDATA[<html></html>]]></serialization-matches>
        </all-of>
      </result>
   </test-case>

   <test-case name="Serialization-html-36" covers-30="html-output">
      <description>Test media-type and include-content-type parameters for HTML 5.0, where input had a head element</description>
      <created by="Henry Zongaro" on="2012-10-26"/>
      <modified by="O'Neil Delpratt" on="2013-05-30" change="added dependency inline with bug issue #21868"/>
      <modified by="Michael Kay" on="2013-06-14" change="relax the expected result pattern"/>
      <dependency type="feature" value="serialization" satisfied="true"/>
      <dependency type="spec" value="XQ30+"/>
      <test><![CDATA[
declare namespace output = "http://www.w3.org/2010/xslt-xquery-serialization";
declare option output:method  "html";
declare option output:indent  "no";
declare option output:include-content-type  "yes";
declare option output:media-type  "text/html";
declare option output:encoding  "UTF-8";
declare option output:version  "5.0";

<html><head/></html>
]]></test>
      <result>
        <all-of>
          <serialization-matches flags="i"><![CDATA[<!DOCTYPE\s+html\s*>\s*<html><head><meta +(?:(?:http-equiv=(['"])content-type\1 +content=(['"])text/html; *charset=UTF-8\2)|(?:content=(['"])text/html; *charset=UTF-8\3 +http-equiv=(['"])content-type\4)) *></head></html>]]></serialization-matches>
          <serialization-matches><![CDATA[<!.......\s+(html|HTML)\s*>\s*<html><head><[^>]*></head></html>]]></serialization-matches>
        </all-of>
      </result>
   </test-case>

   <test-case name="Serialization-html-37" covers-30="html-output">
      <description>Test media-type and include-content-type parameters for HTML 5.0, where input had a head element already containing a meta element</description>
      <created by="Henry Zongaro" on="2012-10-26"/>
      <modified by="O'Neil Delpratt" on="2013-05-30" change="added dependency inline with bug issue #21868"/>
      <modified by="Michael Kay" on="2013-06-14" change="relax the expected result pattern"/>
      <dependency type="feature" value="serialization" satisfied="true"/>
      <dependency type="spec" value="XQ30+"/>
      <test><![CDATA[
declare namespace output = "http://www.w3.org/2010/xslt-xquery-serialization";
declare option output:method  "html";
declare option output:indent  "no";
declare option output:include-content-type  "yes";
declare option output:media-type  "text/html";
declare option output:encoding  "UTF-8";
declare option output:version  "5.0";

<html><head><meta http-equiv="Content-Type" content="text/html;version='3.0'"/></head></html>
]]></test>
      <result>
        <all-of>
          <serialization-matches flags="i"><![CDATA[<!DOCTYPE +html *>\s*<html><head><meta +(?:(?:http-equiv=(['"])content-type\1 +content=(['"])text/html; *charset=UTF-8\2)|(?:content=(['"])text/html; *charset=UTF-8\3 +http-equiv=(['"])content-type\4)) *></head></html>]]></serialization-matches>
          <serialization-matches><![CDATA[<!....... +(html|HTML) *>\s*<html><head><[^>]*></head></html>]]></serialization-matches>
        </all-of>
      </result>
   </test-case>

   <test-case name="Serialization-html-38" covers-30="html-output">
      <description>Test media-type and include-content-type parameters for HTML 5.0, where input had no head element</description>
      <created by="Henry Zongaro" on="2012-10-26"/>
      <modified by="O'Neil Delpratt" on="2013-05-30" change="added dependency inline with bug issue #21868"/>
      <modified by="Michael Kay" on="2013-06-14" change="relax the expected result pattern"/>
      <dependency type="feature" value="serialization" satisfied="true"/>
      <dependency type="spec" value="XQ30+"/>
      <test><![CDATA[
declare namespace output = "http://www.w3.org/2010/xslt-xquery-serialization";
declare option output:method  "html";
declare option output:indent  "no";
declare option output:include-content-type  "yes";
declare option output:media-type  "text/html";
declare option output:encoding  "UTF-8";
declare option output:version  "5.0";

<html/>
]]></test>
      <result>
        <all-of>
          <serialization-matches flags="i"><![CDATA[<!DOCTYPE +html *>\s*<html></html>]]></serialization-matches>
          <serialization-matches><![CDATA[<!....... +(html|HTML) *>\s*<html></html>]]></serialization-matches>
        </all-of>
      </result>
   </test-case>

   <test-case name="Serialization-html-39" covers-30="html-output">
      <description>Test include-content-type parameter with a value of no for HTML 4.0</description>
      <created by="Henry Zongaro" on="2012-10-26"/>
      <modified by="O'Neil Delpratt" on="2013-05-30" change="added dependency inline with bug issue #21868"/>
      <dependency type="feature" value="serialization" satisfied="true"/>
      <dependency type="spec" value="XQ30+"/>
      <test><![CDATA[
declare namespace output = "http://www.w3.org/2010/xslt-xquery-serialization";
declare option output:method  "html";
declare option output:indent  "no";
declare option output:include-content-type  "no";
declare option output:media-type  "text/html";
declare option output:encoding  "UTF-8";
declare option output:version  "4.0";

<html><head/></html>
]]></test>
      <result>
        <serialization-matches><![CDATA[<html><head></head></html>]]></serialization-matches>
      </result>
   </test-case>

   <test-case name="Serialization-html-40" covers-30="html-output">
      <description>Test include-content-type parameter with a value of no for HTML 5.0</description>
      <created by="Henry Zongaro" on="2012-10-26"/>
      <modified by="O'Neil Delpratt" on="2013-05-30" change="added dependency inline with bug issue #21868"/>
      <modified by="Michael Kay" on="2013-06-14" change="relax the expected result pattern"/>
      <dependency type="feature" value="serialization" satisfied="true"/>
      <dependency type="spec" value="XQ30+"/>
      <test><![CDATA[
declare namespace output = "http://www.w3.org/2010/xslt-xquery-serialization";
declare option output:method  "html";
declare option output:indent  "no";
declare option output:include-content-type  "no";
declare option output:media-type  "text/html";
declare option output:encoding  "UTF-8";
declare option output:version  "5.0";

<html><head/></html>
]]></test>
      <result>
        <all-of>
          <serialization-matches><![CDATA[<!....... +(html|HTML) *>\s*<html><head></head></html>]]></serialization-matches>
          <serialization-matches flags="i"><![CDATA[<!DOCTYPE .*]]></serialization-matches>
        </all-of>
      </result>
   </test-case>

   <test-case name="Serialization-html-41" covers-30="html-output">
      <description>Test byte-order-mark parameter for HTML 4.0</description>
      <created by="Henry Zongaro" on="2012-10-26"/>
      <dependency type="spec" value="XQ30+"/>
      <test><![CDATA[ () ]]></test>
      <result>
        <assert-empty />
      </result>
   </test-case>

   <test-case name="Serialization-html-42" covers-30="html-output">
      <description>Test byte-order-mark parameter for HTML 5.0</description>
      <created by="Henry Zongaro" on="2012-10-26"/>
      <dependency type="spec" value="XQ30+"/>
     <test><![CDATA[ () ]]></test>
      <result>
        <assert-empty />
      </result>
   </test-case>

   <test-case name="Serialization-html-43" covers-30="html-output">
      <description>Test escape-uri-attributes parameter for HTML 4.0</description>
      <created by="Henry Zongaro" on="2012-10-26"/>
      <dependency type="spec" value="XQ30+"/>
     <test><![CDATA[ () ]]></test>
      <result>
        <assert-empty />
      </result>
   </test-case>

   <test-case name="Serialization-html-44" covers-30="html-output">
      <description>Test escape-uri-attributes parameter for HTML 5.0</description>
      <created by="Henry Zongaro" on="2012-10-26"/>
      <dependency type="spec" value="XQ30+"/>
     <test><![CDATA[ () ]]></test>
      <result>
        <assert-empty />
      </result>
   </test-case>

  <test-case name="Serialization-html-45" covers="serialization-general">
      <description>Test the HTML serialization output method - empty array</description>
      <created by="Tim Mills" on="2016-09-30"/>
      <dependency type="spec" value="XQ31+"/>
      <test><![CDATA[
declare boundary-space strip;
declare namespace output = "http://www.w3.org/2010/xslt-xquery-serialization";
declare option output:method  "html";
declare option output:indent  "no";
declare option output:version  "4.0";

let $html := <html><body><area/><base/><br/><col/><embed/><frame/><hr/><img/><input/><isindex/><link/><meta/><param/></body></html>
return [ $html ]
]]></test>
      <result>
         <serialization-matches><![CDATA[<html><body><area><base><br><col><embed><frame><hr><img><input><isindex><link><meta><param></body></html>]]></serialization-matches>
      </result>
   </test-case>

  <test-case name="Serialization-html-46" covers="serialization-general">
      <description>Test the HTML serialization output method - empty map</description>
      <created by="Tim Mills" on="2016-09-30"/>
      <dependency type="spec" value="XQ31+"/>
      <test><![CDATA[
 
     	declare namespace output = "http://www.w3.org/2010/xslt-xquery-serialization";
        declare option output:method "html";
        map { } 

      ]]></test>
      <result>
	<assert-serialization-error code="SENR0001"/>
      </result>
   </test-case>

</test-set>
